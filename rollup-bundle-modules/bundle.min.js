!function(){"use strict";function t(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function e(e){var n;return 1===e.length&&(n=e,e=function(e,i){return t(n(e),i)}),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}var n=e(t).right;var i=Math.sqrt(50),r=Math.sqrt(10),s=Math.sqrt(2);function a(t,e,n){var a=(e-t)/Math.max(0,n),o=Math.floor(Math.log(a)/Math.LN10),h=a/Math.pow(10,o);return o>=0?(h>=i?10:h>=r?5:h>=s?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(h>=i?10:h>=r?5:h>=s?2:1)}function o(t,e,n){var a=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),h=a/o;return h>=i?o*=10:h>=r?o*=5:h>=s&&(o*=2),e<t?-o:o}function h(t,e){var n,i,r=t.length,s=-1;if(null==e){for(;++s<r;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<r;)null!=(n=t[s])&&n>i&&(i=n)}else for(;++s<r;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<r;)null!=(n=e(t[s],s,t))&&n>i&&(i=n);return i}function l(t,e){var n,i,r=t.length,s=-1;if(null==e){for(;++s<r;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<r;)null!=(n=t[s])&&i>n&&(i=n)}else for(;++s<r;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<r;)null!=(n=e(t[s],s,t))&&i>n&&(i=n);return i}function u(t,e){var n,i=t.length,r=-1,s=0;if(null==e)for(;++r<i;)(n=+t[r])&&(s+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(s+=n);return s}var c=Array.prototype.slice;function f(t){return t}var d=1,_=2,p=3,g=4,y=1e-6;function m(t){return"translate("+(t+.5)+",0)"}function v(t){return"translate(0,"+(t+.5)+")"}function x(t){return function(e){return+t(e)}}function b(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function w(){return!this.__axis}function A(t,e){var n=[],i=null,r=null,s=6,a=6,o=3,h=t===d||t===g?-1:1,l=t===g||t===_?"x":"y",u=t===d||t===p?m:v;function A(c){var m=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,v=null==r?e.tickFormat?e.tickFormat.apply(e,n):f:r,A=Math.max(s,0)+o,C=e.range(),k=+C[0]+.5,M=+C[C.length-1]+.5,S=(e.bandwidth?b:x)(e.copy()),T=c.selection?c.selection():c,D=T.selectAll(".domain").data([null]),L=T.selectAll(".tick").data(m,e).order(),E=L.exit(),N=L.enter().append("g").attr("class","tick"),R=L.select("line"),P=L.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(N),R=R.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",h*s)),P=P.merge(N.append("text").attr("fill","currentColor").attr(l,h*A).attr("dy",t===d?"0em":t===p?"0.71em":"0.32em")),c!==T&&(D=D.transition(c),L=L.transition(c),R=R.transition(c),P=P.transition(c),E=E.transition(c).attr("opacity",y).attr("transform",(function(t){return isFinite(t=S(t))?u(t):this.getAttribute("transform")})),N.attr("opacity",y).attr("transform",(function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:S(t))}))),E.remove(),D.attr("d",t===g||t==_?a?"M"+h*a+","+k+"H0.5V"+M+"H"+h*a:"M0.5,"+k+"V"+M:a?"M"+k+","+h*a+"V0.5H"+M+"V"+h*a:"M"+k+",0.5H"+M),L.attr("opacity",1).attr("transform",(function(t){return u(S(t))})),R.attr(l+"2",h*s),P.attr(l,h*A).text(v),T.filter(w).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===_?"start":t===g?"end":"middle"),T.each((function(){this.__axis=S}))}return A.scale=function(t){return arguments.length?(e=t,A):e},A.ticks=function(){return n=c.call(arguments),A},A.tickArguments=function(t){return arguments.length?(n=null==t?[]:c.call(t),A):n.slice()},A.tickValues=function(t){return arguments.length?(i=null==t?null:c.call(t),A):i&&i.slice()},A.tickFormat=function(t){return arguments.length?(r=t,A):r},A.tickSize=function(t){return arguments.length?(s=a=+t,A):s},A.tickSizeInner=function(t){return arguments.length?(s=+t,A):s},A.tickSizeOuter=function(t){return arguments.length?(a=+t,A):a},A.tickPadding=function(t){return arguments.length?(o=+t,A):o},A}function C(t){return A(p,t)}var k={value:function(){}};function M(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new S(i)}function S(t){this._=t}function T(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function D(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function L(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=k,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}S.prototype=M.prototype={constructor:S,on:function(t,e){var n,i=this._,r=T(t+"",i),s=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=r[s]).type)i[n]=L(i[n],t.name,e);else if(null==e)for(n in i)i[n]=L(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=r[s]).type)&&(n=D(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new S(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};var E="http://www.w3.org/1999/xhtml",N={svg:"http://www.w3.org/2000/svg",xhtml:E,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function R(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),N.hasOwnProperty(e)?{space:N[e],local:t}:t}function P(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===E&&e.documentElement.namespaceURI===E?e.createElement(t):e.createElementNS(n,t)}}function O(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function z(t){var e=R(t);return(e.local?O:P)(e)}function F(){}function H(t){return null==t?F:function(){return this.querySelector(t)}}function B(){return[]}function U(t){return null==t?B:function(){return this.querySelectorAll(t)}}function Y(t){return function(){return this.matches(t)}}function G(t){return new Array(t.length)}function I(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}I.prototype={constructor:I,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var V="$";function X(t,e,n,i,r,s){for(var a,o=0,h=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new I(t,s[o]);for(;o<h;++o)(a=e[o])&&(r[o]=a)}function W(t,e,n,i,r,s,a){var o,h,l,u={},c=e.length,f=s.length,d=new Array(c);for(o=0;o<c;++o)(h=e[o])&&(d[o]=l=V+a.call(h,h.__data__,o,e),l in u?r[o]=h:u[l]=h);for(o=0;o<f;++o)(h=u[l=V+a.call(t,s[o],o,s)])?(i[o]=h,h.__data__=s[o],u[l]=null):n[o]=new I(t,s[o]);for(o=0;o<c;++o)(h=e[o])&&u[d[o]]===h&&(r[o]=h)}function j(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function q(t){return function(){this.removeAttribute(t)}}function Z(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $(t,e){return function(){this.setAttribute(t,e)}}function K(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Q(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function J(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function tt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function et(t){return function(){this.style.removeProperty(t)}}function nt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function it(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function rt(t,e){return t.style.getPropertyValue(e)||tt(t).getComputedStyle(t,null).getPropertyValue(e)}function st(t){return function(){delete this[t]}}function at(t,e){return function(){this[t]=e}}function ot(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ht(t){return t.trim().split(/^|\s+/)}function lt(t){return t.classList||new ut(t)}function ut(t){this._node=t,this._names=ht(t.getAttribute("class")||"")}function ct(t,e){for(var n=lt(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ft(t,e){for(var n=lt(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function dt(t){return function(){ct(this,t)}}function _t(t){return function(){ft(this,t)}}function pt(t,e){return function(){(e.apply(this,arguments)?ct:ft)(this,t)}}function gt(){this.textContent=""}function yt(t){return function(){this.textContent=t}}function mt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function vt(){this.innerHTML=""}function xt(t){return function(){this.innerHTML=t}}function bt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function wt(){this.nextSibling&&this.parentNode.appendChild(this)}function At(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ct(){return null}function kt(){var t=this.parentNode;t&&t.removeChild(this)}function Mt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function St(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}ut.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Tt={},Dt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Tt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Lt(t,e,n){return t=Et(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Et(t,e,n){return function(i){var r=Dt;Dt=i;try{t.call(this,this.__data__,e,n)}finally{Dt=r}}}function Nt(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Rt(t,e,n){var i=Tt.hasOwnProperty(t.type)?Lt:Et;return function(r,s,a){var o,h=this.__on,l=i(e,s,a);if(h)for(var u=0,c=h.length;u<c;++u)if((o=h[u]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=l,o.capture=n),void(o.value=e);this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,capture:n},h?h.push(o):this.__on=[o]}}function Pt(t,e,n,i){var r=Dt;t.sourceEvent=Dt,Dt=t;try{return e.apply(n,i)}finally{Dt=r}}function Ot(t,e,n){var i=tt(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function zt(t,e){return function(){return Ot(this,t,e)}}function Ft(t,e){return function(){return Ot(this,t,e.apply(this,arguments))}}var Ht=[null];function Bt(t,e){this._groups=t,this._parents=e}function Ut(){return new Bt([[document.documentElement]],Ht)}function Yt(t){return"string"==typeof t?new Bt([[document.querySelector(t)]],[document.documentElement]):new Bt([[t]],Ht)}function Gt(){for(var t,e=Dt;t=e.sourceEvent;)e=t;return e}function It(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function Vt(t){var e=Gt();return e.changedTouches&&(e=e.changedTouches[0]),It(t,e)}function Xt(t,e,n){arguments.length<3&&(n=e,e=Gt().changedTouches);for(var i,r=0,s=e?e.length:0;r<s;++r)if((i=e[r]).identifier===n)return It(t,i);return null}function Wt(){Dt.preventDefault(),Dt.stopImmediatePropagation()}function jt(t){var e=t.document.documentElement,n=Yt(t).on("dragstart.drag",Wt,!0);"onselectstart"in e?n.on("selectstart.drag",Wt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function qt(t,e){var n=t.document.documentElement,i=Yt(t).on("dragstart.drag",null);e&&(i.on("click.drag",Wt,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Zt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $t(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Kt(){}Bt.prototype=Ut.prototype={constructor:Bt,select:function(t){"function"!=typeof t&&(t=H(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a,o=e[r],h=o.length,l=i[r]=new Array(h),u=0;u<h;++u)(s=o[u])&&(a=t.call(s,s.__data__,u,o))&&("__data__"in s&&(a.__data__=s.__data__),l[u]=a);return new Bt(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a,o=e[s],h=o.length,l=0;l<h;++l)(a=o[l])&&(i.push(t.call(a,a.__data__,l,o)),r.push(a));return new Bt(i,r)},filter:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,h=i[r]=[],l=0;l<o;++l)(s=a[l])&&t.call(s,s.__data__,l,a)&&h.push(s);return new Bt(i,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each((function(t){d[++l]=t})),d;var n=e?W:X,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=r.length,a=new Array(s),o=new Array(s),h=new Array(s),l=0;l<s;++l){var u=i[l],c=r[l],f=c.length,d=t.call(u,u&&u.__data__,l,i),_=d.length,p=o[l]=new Array(_),g=a[l]=new Array(_);n(u,c,p,g,h[l]=new Array(f),d,e);for(var y,m,v=0,x=0;v<_;++v)if(y=p[v]){for(v>=x&&(x=v+1);!(m=g[x])&&++x<_;);y._next=m||null}}return(a=new Bt(a,i))._enter=o,a._exit=h,a},enter:function(){return new Bt(this._enter||this._groups.map(G),this._parents)},exit:function(){return new Bt(this._exit||this._groups.map(G),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var h,l=e[o],u=n[o],c=l.length,f=a[o]=new Array(c),d=0;d<c;++d)(h=l[d]||u[d])&&(f[d]=h);for(;o<i;++o)a[o]=e[o];return new Bt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=j);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],h=o.length,l=r[s]=new Array(h),u=0;u<h;++u)(a=o[u])&&(l[u]=a);l.sort(e)}return new Bt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],a=0,o=s.length;a<o;++a)(r=s[a])&&t.call(r,r.__data__,a,s);return this},attr:function(t,e){var n=R(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Z:q:"function"==typeof e?n.local?J:Q:n.local?K:$)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?et:"function"==typeof e?it:nt)(t,e,null==n?"":n)):rt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?st:"function"==typeof e?ot:at)(t,e)):this.node()[t]},classed:function(t,e){var n=ht(t+"");if(arguments.length<2){for(var i=lt(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?pt:e?dt:_t)(n,e))},text:function(t){return arguments.length?this.each(null==t?gt:("function"==typeof t?mt:yt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?vt:("function"==typeof t?bt:xt)(t)):this.node().innerHTML},raise:function(){return this.each(wt)},lower:function(){return this.each(At)},append:function(t){var e="function"==typeof t?t:z(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:z(t),i=null==e?Ct:"function"==typeof e?e:H(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(kt)},clone:function(t){return this.select(t?St:Mt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=s.length;if(!(arguments.length<2)){for(o=e?Rt:Nt,null==n&&(n=!1),i=0;i<a;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var h,l=0,u=o.length;l<u;++l)for(i=0,h=o[l];i<a;++i)if((r=s[i]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?Ft:zt)(t,e))}};var Qt="\\s*([+-]?\\d+)\\s*",Jt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ee=/^#([0-9a-f]{3,8})$/,ne=new RegExp("^rgb\\("+[Qt,Qt,Qt]+"\\)$"),ie=new RegExp("^rgb\\("+[te,te,te]+"\\)$"),re=new RegExp("^rgba\\("+[Qt,Qt,Qt,Jt]+"\\)$"),se=new RegExp("^rgba\\("+[te,te,te,Jt]+"\\)$"),ae=new RegExp("^hsl\\("+[Jt,te,te]+"\\)$"),oe=new RegExp("^hsla\\("+[Jt,te,te,Jt]+"\\)$"),he={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function le(){return this.rgb().formatHex()}function ue(){return this.rgb().formatRgb()}function ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ee.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?fe(e):3===n?new ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new ge(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new ge(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ne.exec(t))?new ge(e[1],e[2],e[3],1):(e=ie.exec(t))?new ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=re.exec(t))?de(e[1],e[2],e[3],e[4]):(e=se.exec(t))?de(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ae.exec(t))?xe(e[1],e[2]/100,e[3]/100,1):(e=oe.exec(t))?xe(e[1],e[2]/100,e[3]/100,e[4]):he.hasOwnProperty(t)?fe(he[t]):"transparent"===t?new ge(NaN,NaN,NaN,0):null}function fe(t){return new ge(t>>16&255,t>>8&255,255&t,1)}function de(t,e,n,i){return i<=0&&(t=e=n=NaN),new ge(t,e,n,i)}function _e(t){return t instanceof Kt||(t=ce(t)),t?new ge((t=t.rgb()).r,t.g,t.b,t.opacity):new ge}function pe(t,e,n,i){return 1===arguments.length?_e(t):new ge(t,e,n,null==i?1:i)}function ge(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function ye(){return"#"+ve(this.r)+ve(this.g)+ve(this.b)}function me(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ve(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function xe(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new we(t,e,n,i)}function be(t){if(t instanceof we)return new we(t.h,t.s,t.l,t.opacity);if(t instanceof Kt||(t=ce(t)),!t)return new we;if(t instanceof we)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,h=(s+r)/2;return o?(a=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=h<.5?s+r:2-s-r,a*=60):o=h>0&&h<1?0:a,new we(a,o,h,t.opacity)}function we(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Ae(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Zt(Kt,ce,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:le,formatHex:le,formatHsl:function(){return be(this).formatHsl()},formatRgb:ue,toString:ue}),Zt(ge,pe,$t(Kt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ye,formatHex:ye,formatRgb:me,toString:me})),Zt(we,(function(t,e,n,i){return 1===arguments.length?be(t):new we(t,e,n,null==i?1:i)}),$t(Kt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new we(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new we(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ge(Ae(t>=240?t-240:t+120,r,i),Ae(t,r,i),Ae(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ce=Math.PI/180,ke=180/Math.PI,Me=.96422,Se=1,Te=.82521,De=4/29,Le=6/29,Ee=3*Le*Le,Ne=Le*Le*Le;function Re(t){if(t instanceof Pe)return new Pe(t.l,t.a,t.b,t.opacity);if(t instanceof Ue)return Ye(t);t instanceof ge||(t=_e(t));var e,n,i=He(t.r),r=He(t.g),s=He(t.b),a=Oe((.2225045*i+.7168786*r+.0606169*s)/Se);return i===r&&r===s?e=n=a:(e=Oe((.4360747*i+.3850649*r+.1430804*s)/Me),n=Oe((.0139322*i+.0971045*r+.7141733*s)/Te)),new Pe(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Pe(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Oe(t){return t>Ne?Math.pow(t,1/3):t/Ee+De}function ze(t){return t>Le?t*t*t:Ee*(t-De)}function Fe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function He(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Be(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ue)return new Ue(t.h,t.c,t.l,t.opacity);if(t instanceof Pe||(t=Re(t)),0===t.a&&0===t.b)return new Ue(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ke;return new Ue(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Ue(t,e,n,null==i?1:i)}function Ue(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Ye(t){if(isNaN(t.h))return new Pe(t.l,0,0,t.opacity);var e=t.h*Ce;return new Pe(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Ge(t){return function(){return t}}function Ie(t,e){return function(n){return t+n*e}}function Ve(t){return 1==(t=+t)?Xe:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Ge(isNaN(e)?n:e)}}function Xe(t,e){var n=e-t;return n?Ie(t,n):Ge(isNaN(t)?e:t)}Zt(Pe,(function(t,e,n,i){return 1===arguments.length?Re(t):new Pe(t,e,n,null==i?1:i)}),$t(Kt,{brighter:function(t){return new Pe(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Pe(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new ge(Fe(3.1338561*(e=Me*ze(e))-1.6168667*(t=Se*ze(t))-.4906146*(n=Te*ze(n))),Fe(-.9787684*e+1.9161415*t+.033454*n),Fe(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Zt(Ue,Be,$t(Kt,{brighter:function(t){return new Ue(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ue(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ye(this).rgb()}}));var We=function t(e){var n=Ve(e);function i(t,e){var i=n((t=pe(t)).r,(e=pe(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),a=Xe(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);var je,qe=(je=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,o=i<e-1?t[i+2]:2*s-r;return function(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}((n-i/e)*e,a,r,s,o)}},function(t){var e,n,i=t.length,r=new Array(i),s=new Array(i),a=new Array(i);for(e=0;e<i;++e)n=pe(t[e]),r[e]=n.r||0,s[e]=n.g||0,a[e]=n.b||0;return r=je(r),s=je(s),a=je(a),n.opacity=1,function(t){return n.r=r(t),n.g=s(t),n.b=a(t),n+""}});function Ze(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=nn(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=s[n](t);return a}}function $e(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}}function Ke(t,e){return e-=t=+t,function(n){return t+e*n}}function Qe(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=nn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var Je=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tn=new RegExp(Je.source,"g");function en(t,e){var n,i,r,s=Je.lastIndex=tn.lastIndex=0,a=-1,o=[],h=[];for(t+="",e+="";(n=Je.exec(t))&&(i=tn.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,h.push({i:a,x:Ke(n,i)})),s=tn.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)o[(n=h[i]).i]=n.x(t);return o.join("")})}function nn(t,e){var n,i=typeof e;return null==e||"boolean"===i?Ge(e):("number"===i?Ke:"string"===i?(n=ce(e))?(e=n,We):en:e instanceof ce?We:e instanceof Date?$e:Array.isArray(e)?Ze:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Qe:Ke)(t,e)}function rn(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}var sn,an,on,hn,ln=180/Math.PI,un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cn(t,e,n,i,r,s){var a,o,h;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(h=t*n+e*i)&&(n-=t*h,i-=e*h),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,h/=o),t*i<e*n&&(t=-t,e=-e,h=-h,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*ln,skewX:Math.atan(h)*ln,scaleX:a,scaleY:o}}function fn(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,a){var o=[],h=[];return s=t(s),a=t(a),function(t,i,r,s,a,o){if(t!==r||i!==s){var h=a.push("translate(",null,e,null,n);o.push({i:h-4,x:Ke(t,r)},{i:h-2,x:Ke(i,s)})}else(r||s)&&a.push("translate("+r+e+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,h),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Ke(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(s.rotate,a.rotate,o,h),function(t,e,n,s){t!==e?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Ke(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(s.skewX,a.skewX,o,h),function(t,e,n,i,s,a){if(t!==n||e!==i){var o=s.push(r(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Ke(t,n)},{i:o-2,x:Ke(e,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,h),s=a=null,function(t){for(var e,n=-1,i=h.length;++n<i;)o[(e=h[n]).i]=e.x(t);return o.join("")}}}var dn=fn((function(t){return"none"===t?un:(sn||(sn=document.createElement("DIV"),an=document.documentElement,on=document.defaultView),sn.style.transform=t,t=on.getComputedStyle(an.appendChild(sn),null).getPropertyValue("transform"),an.removeChild(sn),cn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),_n=fn((function(t){return null==t?un:(hn||(hn=document.createElementNS("http://www.w3.org/2000/svg","g")),hn.setAttribute("transform",t),(t=hn.transform.baseVal.consolidate())?cn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):un)}),", ",")",")"),pn=Math.SQRT2,gn=2,yn=4,mn=1e-12;function vn(t){return((t=Math.exp(t))+1/t)/2}function xn(t,e){var n,i,r=t[0],s=t[1],a=t[2],o=e[0],h=e[1],l=e[2],u=o-r,c=h-s,f=u*u+c*c;if(f<mn)i=Math.log(l/a)/pn,n=function(t){return[r+t*u,s+t*c,a*Math.exp(pn*t*i)]};else{var d=Math.sqrt(f),_=(l*l-a*a+yn*f)/(2*a*gn*d),p=(l*l-a*a-yn*f)/(2*l*gn*d),g=Math.log(Math.sqrt(_*_+1)-_),y=Math.log(Math.sqrt(p*p+1)-p);i=(y-g)/pn,n=function(t){var e=t*i,n=vn(g),o=a/(gn*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(pn*e+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[r+o*u,s+o*c,a*n/vn(pn*e+g)]}}return n.duration=1e3*i,n}var bn,wn,An=function(t){return function(e,n){var i=t((e=Be(e)).h,(n=Be(n)).h),r=Xe(e.c,n.c),s=Xe(e.l,n.l),a=Xe(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=s(t),e.opacity=a(t),e+""}}}((function(t,e){var n=e-t;return n?Ie(t,n>180||n<-180?n-360*Math.round(n/360):n):Ge(isNaN(t)?e:t)})),Cn=0,kn=0,Mn=0,Sn=1e3,Tn=0,Dn=0,Ln=0,En="object"==typeof performance&&performance.now?performance:Date,Nn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rn(){return Dn||(Nn(Pn),Dn=En.now()+Ln)}function Pn(){Dn=0}function On(){this._call=this._time=this._next=null}function zn(t,e,n){var i=new On;return i.restart(t,e,n),i}function Fn(){Dn=(Tn=En.now())+Ln,Cn=kn=0;try{!function(){Rn(),++Cn;for(var t,e=bn;e;)(t=Dn-e._time)>=0&&e._call.call(null,t),e=e._next;--Cn}()}finally{Cn=0,function(){var t,e,n=bn,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:bn=e);wn=t,Bn(i)}(),Dn=0}}function Hn(){var t=En.now(),e=t-Tn;e>Sn&&(Ln-=e,Tn=t)}function Bn(t){Cn||(kn&&(kn=clearTimeout(kn)),t-Dn>24?(t<1/0&&(kn=setTimeout(Fn,t-En.now()-Ln)),Mn&&(Mn=clearInterval(Mn))):(Mn||(Tn=En.now(),Mn=setInterval(Hn,Sn)),Cn=1,Nn(Fn)))}function Un(t,e,n){var i=new On;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i}On.prototype=zn.prototype={constructor:On,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Rn():+n)+(null==e?0:+e),this._next||wn===this||(wn?wn._next=this:bn=this,wn=this),this._call=t,this._time=n,Bn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bn())}};var Yn=M("start","end","cancel","interrupt"),Gn=[],In=0,Vn=1,Xn=2,Wn=3,jn=4,qn=5,Zn=6;function $n(t,e,n,i,r,s){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function s(h){var l,u,c,f;if(n.state!==Vn)return o();for(l in r)if((f=r[l]).name===n.name){if(f.state===Wn)return Un(s);f.state===jn?(f.state=Zn,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=Zn,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l])}if(Un((function(){n.state===Wn&&(n.state=jn,n.timer.restart(a,n.delay,n.time),a(h))})),n.state=Xn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Xn){for(n.state=Wn,i=new Array(c=n.tween.length),l=0,u=-1;l<c;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=qn,1),s=-1,a=i.length;++s<a;)i[s].call(t,r);n.state===qn&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var i in n.state=Zn,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=zn((function(t){n.state=Vn,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:Yn,tween:Gn,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:In})}function Kn(t,e){var n=Jn(t,e);if(n.state>In)throw new Error("too late; already scheduled");return n}function Qn(t,e){var n=Jn(t,e);if(n.state>Wn)throw new Error("too late; already running");return n}function Jn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ti(t,e){var n,i,r,s=t.__transition,a=!0;if(s){for(r in e=null==e?null:e+"",s)(n=s[r]).name===e?(i=n.state>Xn&&n.state<qn,n.state=Zn,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[r]):a=!1;a&&delete t.__transition}}function ei(t,e){var n,i;return function(){var r=Qn(this,t),s=r.tween;if(s!==n)for(var a=0,o=(i=n=s).length;a<o;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function ni(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=Qn(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:e,value:n},h=0,l=r.length;h<l;++h)if(r[h].name===e){r[h]=o;break}h===l&&r.push(o)}s.tween=r}}function ii(t,e,n){var i=t._id;return t.each((function(){var t=Qn(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Jn(t,i).value[e]}}function ri(t,e){var n;return("number"==typeof e?Ke:e instanceof ce?We:(n=ce(e))?(e=n,We):en)(t,e)}function si(t){return function(){this.removeAttribute(t)}}function ai(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oi(t,e,n){var i,r,s=n+"";return function(){var a=this.getAttribute(t);return a===s?null:a===i?r:r=e(i=a,n)}}function hi(t,e,n){var i,r,s=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===s?null:a===i?r:r=e(i=a,n)}}function li(t,e,n){var i,r,s;return function(){var a,o,h=n(this);if(null!=h)return(a=this.getAttribute(t))===(o=h+"")?null:a===i&&o===r?s:(r=o,s=e(i=a,h));this.removeAttribute(t)}}function ui(t,e,n){var i,r,s;return function(){var a,o,h=n(this);if(null!=h)return(a=this.getAttributeNS(t.space,t.local))===(o=h+"")?null:a===i&&o===r?s:(r=o,s=e(i=a,h));this.removeAttributeNS(t.space,t.local)}}function ci(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,r)),n}return r._value=e,r}function fi(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,r)),n}return r._value=e,r}function di(t,e){return function(){Kn(this,t).delay=+e.apply(this,arguments)}}function _i(t,e){return e=+e,function(){Kn(this,t).delay=e}}function pi(t,e){return function(){Qn(this,t).duration=+e.apply(this,arguments)}}function gi(t,e){return e=+e,function(){Qn(this,t).duration=e}}var yi=Ut.prototype.constructor;function mi(t){return function(){this.style.removeProperty(t)}}var vi=0;function xi(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function bi(){return++vi}var wi=Ut.prototype;xi.prototype=function(t){return Ut().transition(t)}.prototype={constructor:xi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=H(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o,h,l=i[a],u=l.length,c=s[a]=new Array(u),f=0;f<u;++f)(o=l[f])&&(h=t.call(o,o.__data__,f,l))&&("__data__"in o&&(h.__data__=o.__data__),c[f]=h,$n(c[f],e,n,f,c,Jn(o,n)));return new xi(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=U(t));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var h,l=i[o],u=l.length,c=0;c<u;++c)if(h=l[c]){for(var f,d=t.call(h,h.__data__,c,l),_=Jn(h,n),p=0,g=d.length;p<g;++p)(f=d[p])&&$n(f,e,n,p,d,_);s.push(d),a.push(h)}return new xi(s,a,e,n)},filter:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,h=i[r]=[],l=0;l<o;++l)(s=a[l])&&t.call(s,s.__data__,l,a)&&h.push(s);return new xi(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var h,l=e[o],u=n[o],c=l.length,f=a[o]=new Array(c),d=0;d<c;++d)(h=l[d]||u[d])&&(f[d]=h);for(;o<i;++o)a[o]=e[o];return new xi(a,this._parents,this._name,this._id)},selection:function(){return new yi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=bi(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],h=o.length,l=0;l<h;++l)if(a=o[l]){var u=Jn(a,e);$n(a,t,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new xi(i,this._parents,t,n)},call:wi.call,nodes:wi.nodes,node:wi.node,size:wi.size,empty:wi.empty,each:wi.each,on:function(t,e){var n=this._id;return arguments.length<2?Jn(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Kn:Qn;return function(){var a=s(this,t),o=a.on;o!==i&&(r=(i=o).copy()).on(e,n),a.on=r}}(n,t,e))},attr:function(t,e){var n=R(t),i="transform"===n?_n:ri;return this.attrTween(t,"function"==typeof e?(n.local?ui:li)(n,i,ii(this,"attr."+t,e)):null==e?(n.local?ai:si)(n):(n.local?hi:oi)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=R(t);return this.tween(n,(i.local?ci:fi)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?dn:ri;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var s=rt(this,t),a=(this.style.removeProperty(t),rt(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}(t,i)).on("end.style."+t,mi(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,s;return function(){var a=rt(this,t),o=n(this),h=o+"";return null==o&&(this.style.removeProperty(t),h=o=rt(this,t)),a===h?null:a===i&&h===r?s:(r=h,s=e(i=a,o))}}(t,i,ii(this,"style."+t,e))).each(function(t,e){var n,i,r,s,a="style."+e,o="end."+a;return function(){var h=Qn(this,t),l=h.on,u=null==h.value[a]?s||(s=mi(e)):void 0;l===n&&r===u||(i=(n=l).copy()).on(o,r=u),h.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,s=n+"";return function(){var a=rt(this,t);return a===s?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function s(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&function(t,e,n){return function(i){this.style.setProperty(t,e(i),n)}}(t,s,n)),i}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ii(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Jn(this.node(),n).tween,s=0,a=r.length;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((null==e?ei:ni)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?di:_i)(e,t)):Jn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?pi:gi)(e,t)):Jn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Qn(this,t).ease=e}}(e,t)):Jn(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(s,a){var o={value:a},h={value:function(){0==--r&&s()}};n.each((function(){var n=Qn(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(h)),n.on=e}))}))}};var Ai={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ci(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Ai.time=Rn(),Ai;return n}function ki(t){return function(){return t}}function Mi(t,e,n){this.target=t,this.type=e,this.selection=n}function Si(){Dt.stopImmediatePropagation()}function Ti(){Dt.preventDefault(),Dt.stopImmediatePropagation()}Ut.prototype.interrupt=function(t){return this.each((function(){ti(this,t)}))},Ut.prototype.transition=function(t){var e,n;t instanceof xi?(e=t._id,t=t._name):(e=bi(),(n=Ai).time=Rn(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],h=o.length,l=0;l<h;++l)(a=o[l])&&$n(a,t,e,l,o,n||Ci(a,e));return new xi(i,this._parents,t,e)};var Di={name:"drag"},Li={name:"space"},Ei={name:"handle"},Ni={name:"center"};function Ri(t){return[+t[0],+t[1]]}function Pi(t){return[Ri(t[0]),Ri(t[1])]}var Oi={name:"x",handles:["w","e"].map(Gi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},zi={name:"y",handles:["n","s"].map(Gi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Fi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Bi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ui={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Yi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Gi(t){return{type:t}}function Ii(){return!Dt.ctrlKey&&!Dt.button}function Vi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Xi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ji(){return function(t){var e,n=Vi,i=Ii,r=Xi,s=!0,a=M(h,"start","brush","end"),o=6;function h(e){var n=e.property("__brush",p).selectAll(".overlay").data([Gi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Fi.overlay).merge(n).each((function(){var t=Wi(this).extent;Yt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Fi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Fi[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Yt(this),e=Wi(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-o/2:e[0][0]-o/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-o/2:e[0][1]-o/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+o:o})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+o:o}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){return!n&&t.__brush.emitter||new c(t,e)}function c(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if((!e||Dt.touches)&&i.apply(this,arguments)){var n,r,a,o,h,c,f,d,_,p,g,y,m=this,v=Dt.target.__data__.type,x="selection"===(s&&Dt.metaKey?v="overlay":v)?Di:s&&Dt.altKey?Ni:Ei,b=t===zi?null:Ui[v],w=t===Oi?null:Yi[v],A=Wi(m),C=A.extent,k=A.selection,M=C[0][0],S=C[0][1],T=C[1][0],D=C[1][1],L=0,E=0,N=b&&w&&s&&Dt.shiftKey,R=Dt.touches?(y=Dt.changedTouches[0].identifier,function(t){return Xt(t,Dt.touches,y)}):Vt,P=R(m),O=P,z=u(m,arguments,!0).beforestart();"overlay"===v?(k&&(_=!0),A.selection=k=[[n=t===zi?M:P[0],a=t===Oi?S:P[1]],[h=t===zi?T:n,f=t===Oi?D:a]]):(n=k[0][0],a=k[0][1],h=k[1][0],f=k[1][1]),r=n,o=a,c=h,d=f;var F=Yt(m).attr("pointer-events","none"),H=F.selectAll(".overlay").attr("cursor",Fi[v]);if(Dt.touches)z.moved=U,z.ended=G;else{var B=Yt(Dt.view).on("mousemove.brush",U,!0).on("mouseup.brush",G,!0);s&&B.on("keydown.brush",(function(){switch(Dt.keyCode){case 16:N=b&&w;break;case 18:x===Ei&&(b&&(h=c-L*b,n=r+L*b),w&&(f=d-E*w,a=o+E*w),x=Ni,Y());break;case 32:x!==Ei&&x!==Ni||(b<0?h=c-L:b>0&&(n=r-L),w<0?f=d-E:w>0&&(a=o-E),x=Li,H.attr("cursor",Fi.selection),Y());break;default:return}Ti()}),!0).on("keyup.brush",(function(){switch(Dt.keyCode){case 16:N&&(p=g=N=!1,Y());break;case 18:x===Ni&&(b<0?h=c:b>0&&(n=r),w<0?f=d:w>0&&(a=o),x=Ei,Y());break;case 32:x===Li&&(Dt.altKey?(b&&(h=c-L*b,n=r+L*b),w&&(f=d-E*w,a=o+E*w),x=Ni):(b<0?h=c:b>0&&(n=r),w<0?f=d:w>0&&(a=o),x=Ei),H.attr("cursor",Fi[v]),Y());break;default:return}Ti()}),!0),jt(Dt.view)}Si(),ti(m),l.call(m),z.start()}function U(){var t=R(m);!N||p||g||(Math.abs(t[0]-O[0])>Math.abs(t[1]-O[1])?g=!0:p=!0),O=t,_=!0,Ti(),Y()}function Y(){var t;switch(L=O[0]-P[0],E=O[1]-P[1],x){case Li:case Di:b&&(L=Math.max(M-n,Math.min(T-h,L)),r=n+L,c=h+L),w&&(E=Math.max(S-a,Math.min(D-f,E)),o=a+E,d=f+E);break;case Ei:b<0?(L=Math.max(M-n,Math.min(T-n,L)),r=n+L,c=h):b>0&&(L=Math.max(M-h,Math.min(T-h,L)),r=n,c=h+L),w<0?(E=Math.max(S-a,Math.min(D-a,E)),o=a+E,d=f):w>0&&(E=Math.max(S-f,Math.min(D-f,E)),o=a,d=f+E);break;case Ni:b&&(r=Math.max(M,Math.min(T,n-L*b)),c=Math.max(M,Math.min(T,h+L*b))),w&&(o=Math.max(S,Math.min(D,a-E*w)),d=Math.max(S,Math.min(D,f+E*w)))}c<r&&(b*=-1,t=n,n=h,h=t,t=r,r=c,c=t,v in Hi&&H.attr("cursor",Fi[v=Hi[v]])),d<o&&(w*=-1,t=a,a=f,f=t,t=o,o=d,d=t,v in Bi&&H.attr("cursor",Fi[v=Bi[v]])),A.selection&&(k=A.selection),p&&(r=k[0][0],c=k[1][0]),g&&(o=k[0][1],d=k[1][1]),k[0][0]===r&&k[0][1]===o&&k[1][0]===c&&k[1][1]===d||(A.selection=[[r,o],[c,d]],l.call(m),z.brush())}function G(){if(Si(),Dt.touches){if(Dt.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else qt(Dt.view,_),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),H.attr("cursor",Fi.overlay),A.selection&&(k=A.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(k)&&(A.selection=null,l.call(m)),z.end()}}function d(){u(this,arguments).moved()}function _(){u(this,arguments).ended()}function p(){var e=this.__brush||{selection:null};return e.extent=Pi(n.apply(this,arguments)),e.dim=t,e}return h.move=function(e,n){e.selection?e.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var e=this,i=e.__brush,r=u(e,arguments),s=i.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),o=nn(s,a);function h(t){i.selection=1===t&&null===a?null:o(t),l.call(e),r.brush()}return null!==s&&null!==a?h:h(1)})):e.each((function(){var e=this,i=arguments,r=e.__brush,s=t.input("function"==typeof n?n.apply(e,i):n,r.extent),a=u(e,i).beforestart();ti(e),r.selection=null===s?null:s,l.call(e),a.start().brush().end()}))},h.clear=function(t){h.move(t,null)},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Pt(new Mi(h,e,t.output(this.state.selection)),a.apply,a,[e,this.that,this.args])}},h.extent=function(t){return arguments.length?(n="function"==typeof t?t:ki(Pi(t)),h):n},h.filter=function(t){return arguments.length?(i="function"==typeof t?t:ki(!!t),h):i},h.handleSize=function(t){return arguments.length?(o=+t,h):o},h.keyModifiers=function(t){return arguments.length?(s=!!t,h):s},h.on=function(){var t=a.on.apply(a,arguments);return t===a?h:t},h}(Oi)}var qi=Math.PI,Zi=2*qi,$i=Zi-1e-6;function Ki(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Qi(){return new Ki}Ki.prototype=Qi.prototype={constructor:Ki,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var s=this._x1,a=this._y1,o=n-t,h=i-e,l=s-t,u=a-e,c=l*l+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>1e-6)if(Math.abs(u*o-h*l)>1e-6&&r){var f=n-s,d=i-a,_=o*o+h*h,p=f*f+d*d,g=Math.sqrt(_),y=Math.sqrt(c),m=r*Math.tan((qi-Math.acos((_+c-p)/(2*g*y)))/2),v=m/y,x=m/g;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*l)+","+(e+v*u)),this._+="A"+r+","+r+",0,0,"+ +(u*f>l*d)+","+(this._x1=t+x*o)+","+(this._y1=e+x*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,s){t=+t,e=+e,s=!!s;var a=(n=+n)*Math.cos(i),o=n*Math.sin(i),h=t+a,l=e+o,u=1^s,c=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+l:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+h+","+l),n&&(c<0&&(c=c%Zi+Zi),c>$i?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=h)+","+(this._y1=l):c>1e-6&&(this._+="A"+n+","+n+",0,"+ +(c>=qi)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function Ji(){}function tr(t,e){var n=new Ji;if(t instanceof Ji)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,s=t.length;if(null==e)for(;++r<s;)n.set(r,t[r]);else for(;++r<s;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}function er(){var t,e,n,i=[],r=[];function s(n,r,a,o){if(r>=i.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var h,l,u,c=-1,f=n.length,d=i[r++],_=tr(),p=a();++c<f;)(u=_.get(h=d(l=n[c])+""))?u.push(l):_.set(h,[l]);return _.each((function(t,e){o(p,e,s(t,r,a,o))})),p}return n={object:function(t){return s(t,0,nr,ir)},map:function(t){return s(t,0,rr,sr)},entries:function(t){return function t(n,s){if(++s>i.length)return n;var a,o=r[s-1];return null!=e&&s>=i.length?a=n.entries():(a=[],n.each((function(e,n){a.push({key:n,values:t(e,s)})}))),null!=o?a.sort((function(t,e){return o(t.key,e.key)})):a}(s(t,0,rr,sr),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return r[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function nr(){return{}}function ir(t,e,n){t[e]=n}function rr(){return tr()}function sr(t,e,n){t.set(e,n)}function ar(){}Ji.prototype=tr.prototype={constructor:Ji,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var or=tr.prototype;ar.prototype=function(t,e){var n=new ar;if(t instanceof ar)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}.prototype={constructor:ar,has:or.has,add:function(t){return this["$"+(t+="")]=t,this},remove:or.remove,clear:or.clear,values:or.keys,size:or.size,empty:or.empty,each:or.each};var hr={},lr={},ur=34,cr=10,fr=13;function dr(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}function _r(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function pr(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function gr(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+pr(-t,6):t>9999?"+"+pr(t,6):pr(t,4)}(t.getUTCFullYear())+"-"+pr(t.getUTCMonth()+1,2)+"-"+pr(t.getUTCDate(),2)+(r?"T"+pr(e,2)+":"+pr(n,2)+":"+pr(i,2)+"."+pr(r,3)+"Z":i?"T"+pr(e,2)+":"+pr(n,2)+":"+pr(i,2)+"Z":n||e?"T"+pr(e,2)+":"+pr(n,2)+"Z":"")}function yr(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],s=t.length,a=0,o=0,h=s<=0,l=!1;function u(){if(h)return lr;if(l)return l=!1,hr;var e,i,r=a;if(t.charCodeAt(r)===ur){for(;a++<s&&t.charCodeAt(a)!==ur||t.charCodeAt(++a)===ur;);return(e=a)>=s?h=!0:(i=t.charCodeAt(a++))===cr?l=!0:i===fr&&(l=!0,t.charCodeAt(a)===cr&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<s;){if((i=t.charCodeAt(e=a++))===cr)l=!0;else if(i===fr)l=!0,t.charCodeAt(a)===cr&&++a;else if(i!==n)continue;return t.slice(r,e)}return h=!0,t.slice(r,s)}for(t.charCodeAt(s-1)===cr&&--s,t.charCodeAt(s-1)===fr&&--s;(i=u())!==lr;){for(var c=[];i!==hr&&i!==lr;)c.push(i),i=u();e&&null==(c=e(c,o++))||r.push(c)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function s(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?gr(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,s=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=dr(t);return function(i,r){return e(n(i),r,t)}}(t,e):dr(t)}));return s.columns=r||[],s},parseRows:i,format:function(e,n){return null==n&&(n=_r(e)),[n.map(a).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=_r(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(s).join("\n")}}}var mr=yr(",").parse;yr("\t");function vr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function xr(t,e){return fetch(t,e).then(vr)}var br,wr=(br=mr,function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),xr(t,e).then((function(t){return br(t,n)}))});function Ar(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function Cr(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s,a,o,h,l,u,c,f,d=t._root,_={data:i},p=t._x0,g=t._y0,y=t._x1,m=t._y1;if(!d)return t._root=_,t;for(;d.length;)if((l=e>=(s=(p+y)/2))?p=s:y=s,(u=n>=(a=(g+m)/2))?g=a:m=a,r=d,!(d=d[c=u<<1|l]))return r[c]=_,t;if(o=+t._x.call(null,d.data),h=+t._y.call(null,d.data),e===o&&n===h)return _.next=d,r?r[c]=_:t._root=_,t;do{r=r?r[c]=new Array(4):t._root=new Array(4),(l=e>=(s=(p+y)/2))?p=s:y=s,(u=n>=(a=(g+m)/2))?g=a:m=a}while((c=u<<1|l)==(f=(h>=a)<<1|o>=s));return r[f]=d,r[c]=_,t}function kr(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Mr(t){return t[0]}function Sr(t){return t[1]}function Tr(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function Dr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Lr=function(t,e,n){var i=new Tr(null==e?Mr:e,null==n?Sr:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}.prototype=Tr.prototype;function Er(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Nr(t){return(t=Er(Math.abs(t)))?t[1]:NaN}Lr.copy=function(){var t,e,n=new Tr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Dr(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Dr(e));return n},Lr.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Cr(this.cover(e,n),e,n,t)},Lr.addAll=function(t){var e,n,i,r,s=t.length,a=new Array(s),o=new Array(s),h=1/0,l=1/0,u=-1/0,c=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,o[n]=r,i<h&&(h=i),i>u&&(u=i),r<l&&(l=r),r>c&&(c=r));if(h>u||l>c)return this;for(this.cover(h,l).cover(u,c),n=0;n<s;++n)Cr(this,a[n],o[n],t[n]);return this},Lr.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var a,o,h=r-n,l=this._root;n>t||t>=r||i>e||e>=s;)switch(o=(e<i)<<1|t<n,(a=new Array(4))[o]=l,l=a,h*=2,o){case 0:r=n+h,s=i+h;break;case 1:n=r-h,s=i+h;break;case 2:r=n+h,i=s-h;break;case 3:n=r-h,i=s-h}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this},Lr.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Lr.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Lr.find=function(t,e,n){var i,r,s,a,o,h,l,u=this._x0,c=this._y0,f=this._x1,d=this._y1,_=[],p=this._root;for(p&&_.push(new kr(p,u,c,f,d)),null==n?n=1/0:(u=t-n,c=e-n,f=t+n,d=e+n,n*=n);h=_.pop();)if(!(!(p=h.node)||(r=h.x0)>f||(s=h.y0)>d||(a=h.x1)<u||(o=h.y1)<c))if(p.length){var g=(r+a)/2,y=(s+o)/2;_.push(new kr(p[3],g,y,a,o),new kr(p[2],r,y,g,o),new kr(p[1],g,s,a,y),new kr(p[0],r,s,g,y)),(l=(e>=y)<<1|t>=g)&&(h=_[_.length-1],_[_.length-1]=_[_.length-1-l],_[_.length-1-l]=h)}else{var m=t-+this._x.call(null,p.data),v=e-+this._y.call(null,p.data),x=m*m+v*v;if(x<n){var b=Math.sqrt(n=x);u=t-b,c=e-b,f=t+b,d=e+b,i=p.data}}return i},Lr.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,s,a,o,h,l,u,c,f,d=this._root,_=this._x0,p=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=s>=(o=(_+g)/2))?_=o:g=o,(u=a>=(h=(p+y)/2))?p=h:y=h,e=d,!(d=d[c=u<<1|l]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,f=c)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[c]=r:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},Lr.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Lr.root=function(){return this._root},Lr.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Lr.visit=function(t){var e,n,i,r,s,a,o=[],h=this._root;for(h&&o.push(new kr(h,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(h=e.node,i=e.x0,r=e.y0,s=e.x1,a=e.y1)&&h.length){var l=(i+s)/2,u=(r+a)/2;(n=h[3])&&o.push(new kr(n,l,u,s,a)),(n=h[2])&&o.push(new kr(n,i,u,l,a)),(n=h[1])&&o.push(new kr(n,l,r,s,u)),(n=h[0])&&o.push(new kr(n,i,r,l,u))}return this},Lr.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new kr(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var s,a=e.x0,o=e.y0,h=e.x1,l=e.y1,u=(a+h)/2,c=(o+l)/2;(s=r[0])&&n.push(new kr(s,a,o,u,c)),(s=r[1])&&n.push(new kr(s,u,o,h,c)),(s=r[2])&&n.push(new kr(s,a,c,u,l)),(s=r[3])&&n.push(new kr(s,u,c,h,l))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Lr.x=function(t){return arguments.length?(this._x=t,this):this._x},Lr.y=function(t){return arguments.length?(this._y=t,this):this._y};var Rr,Pr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Or(t){if(!(e=Pr.exec(t)))throw new Error("invalid format: "+t);var e;return new zr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function zr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Fr(t,e){var n=Er(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Or.prototype=zr.prototype,zr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Hr={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Fr(100*t,e)},r:Fr,s:function(t,e){var n=Er(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(Rr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Er(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Br(t){return t}var Ur,Yr,Gr,Ir=Array.prototype.map,Vr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xr(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Br:(e=Ir.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],a=0,o=e[0],h=0;r>0&&o>0&&(h+o+1>i&&(o=Math.max(1,i-h)),s.push(t.substring(r-=o,r+o)),!((h+=o+1)>i));)o=e[a=(a+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Br:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ir.call(t.numerals,String)),h=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=Or(t)).fill,n=t.align,c=t.sign,f=t.symbol,d=t.zero,_=t.width,p=t.comma,g=t.precision,y=t.trim,m=t.type;"n"===m?(p=!0,m="g"):Hr[m]||(void 0===g&&(g=12),y=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var v="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x="$"===f?s:/[%p]/.test(m)?h:"",b=Hr[m],w=/[defgprs%]/.test(m);function A(t){var r,s,h,f=v,A=x;if("c"===m)A=b(t)+A,t="";else{var C=(t=+t)<0;if(t=isNaN(t)?u:b(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(r>0){if(!+t[i])break t;r=0}}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),C&&0==+t&&(C=!1),f=(C?"("===c?c:l:"-"===c||"("===c?"":c)+f,A=("s"===m?Vr[8+Rr/3]:"")+A+(C&&"("===c?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(h=t.charCodeAt(r))||h>57){A=(46===h?a+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=i(t,1/0));var k=f.length+t.length+A.length,M=k<_?new Array(_-k+1).join(e):"";switch(p&&d&&(t=i(M+t,M.length?_-A.length:1/0),M=""),n){case"<":t=f+t+A+M;break;case"=":t=f+M+t+A;break;case"^":t=M.slice(0,k=M.length>>1)+f+t+A+M.slice(k);break;default:t=M+f+t+A}return o(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),A.toString=function(){return t+""},A}return{format:c,formatPrefix:function(t,e){var n=c(((t=Or(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3))),r=Math.pow(10,-i),s=Vr[8+i/3];return function(t){return n(r*t)+s}}}}function Wr(){return new jr}function jr(){this.reset()}Ur=Xr({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Yr=Ur.format,Gr=Ur.formatPrefix,jr.prototype={constructor:jr,reset:function(){this.s=this.t=0},add:function(t){Zr(qr,t,this.t),Zr(this,qr.s,this.s),this.s?this.t+=qr.t:this.s=qr.t},valueOf:function(){return this.s}};var qr=new jr;function Zr(t,e,n){var i=t.s=e+n,r=i-e,s=i-r;t.t=e-s+(n-r)}Wr(),Wr(),Wr(),Wr(),Wr(),Wr(),Wr(),Wr();function $r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Kr=Array.prototype,Qr=Kr.map,Jr=Kr.slice,ts={name:"implicit"};function es(){var t=tr(),e=[],n=[],i=ts;function r(r){var s=r+"",a=t.get(s);if(!a){if(i!==ts)return i;t.set(s,a=e.push(r))}return n[(a-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=tr();for(var i,s,a=-1,o=n.length;++a<o;)t.has(s=(i=n[a])+"")||t.set(s,e.push(i));return r},r.range=function(t){return arguments.length?(n=Jr.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return es(e,n).unknown(i)},$r.apply(r,arguments),r}function ns(){var t,e,n=es().unknown(void 0),i=n.domain,r=n.range,s=[0,1],a=!1,o=0,h=0,l=.5;function u(){var n=i().length,u=s[1]<s[0],c=s[u-0],f=s[1-u];t=(f-c)/Math.max(1,n-o+2*h),a&&(t=Math.floor(t)),c+=(f-c-t*(n-o))*l,e=t*(1-o),a&&(c=Math.round(c),e=Math.round(e));var d=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}(n).map((function(e){return c+t*e}));return r(u?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),u()):i()},n.range=function(t){return arguments.length?(s=[+t[0],+t[1]],u()):s.slice()},n.rangeRound=function(t){return s=[+t[0],+t[1]],a=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,u()):a},n.padding=function(t){return arguments.length?(o=Math.min(1,h=+t),u()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),u()):o},n.paddingOuter=function(t){return arguments.length?(h=+t,u()):h},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),u()):l},n.copy=function(){return ns(i(),s).round(a).paddingInner(o).paddingOuter(h).align(l)},$r.apply(u(),arguments)}function is(t){return+t}var rs=[0,1];function ss(t){return t}function as(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function os(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function hs(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=as(r,i),s=n(a,s)):(i=as(i,r),s=n(s,a)),function(t){return s(i(t))}}function ls(t,e,i){var r=Math.min(t.length,e.length)-1,s=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=as(t[o],t[o+1]),a[o]=i(e[o],e[o+1]);return function(e){var i=n(t,e,1,r)-1;return a[i](s[i](e))}}function us(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cs(t,e){return function(){var t,e,n,i,r,s,a=rs,o=rs,h=nn,l=ss;function u(){return i=Math.min(a.length,o.length)>2?ls:hs,r=s=null,c}function c(e){return isNaN(e=+e)?n:(r||(r=i(a.map(t),o,h)))(t(l(e)))}return c.invert=function(n){return l(e((s||(s=i(o,a.map(t),Ke)))(n)))},c.domain=function(t){return arguments.length?(a=Qr.call(t,is),l===ss||(l=os(a)),u()):a.slice()},c.range=function(t){return arguments.length?(o=Jr.call(t),u()):o.slice()},c.rangeRound=function(t){return o=Jr.call(t),h=rn,u()},c.clamp=function(t){return arguments.length?(l=t?os(a):ss,c):l!==ss},c.interpolate=function(t){return arguments.length?(h=t,u()):h},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,i){return t=n,e=i,u()}}()(t,e)}function fs(t,e,n,i){var r,s=o(t,e,n);switch((i=Or(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3)))-Nr(Math.abs(t)))}(s,a))||(i.precision=r),Gr(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nr(e)-Nr(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Nr(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return Yr(i)}function ds(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,s,o,h=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=a(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++h<r;)s[h]=(t+h)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(t-e+1));++h<r;)s[h]=(t-h)/o;return i&&s.reverse(),s}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return fs(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),s=0,o=r.length-1,h=r[s],l=r[o];return l<h&&(i=h,h=l,l=i,i=s,s=o,o=i),(i=a(h,l,n))>0?i=a(h=Math.floor(h/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=a(h=Math.ceil(h*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[s]=Math.floor(h/i)*i,r[o]=Math.ceil(l/i)*i,e(r)):i<0&&(r[s]=Math.ceil(h*i)/i,r[o]=Math.floor(l*i)/i,e(r)),t},t}function _s(){var t=cs(ss,ss);return t.copy=function(){return us(t,_s())},$r.apply(t,arguments),ds(t)}var ps=new Date,gs=new Date;function ys(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,s){var a,o=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return o;do{o.push(a=new Date(+n)),e(n,s),t(n)}while(a<n&&n<i);return o},r.filter=function(n){return ys((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return ps.setTime(+e),gs.setTime(+i),t(ps),t(gs),Math.floor(n(ps,gs))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var ms=ys((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ms.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ys((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ms:null};var vs=6e4,xs=6048e5,bs=ys((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),ws=ys((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+e*vs)}),(function(t,e){return(e-t)/vs}),(function(t){return t.getMinutes()})),As=ys((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*vs)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Cs=ys((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vs)/864e5}),(function(t){return t.getDate()-1}));function ks(t){return ys((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vs)/xs}))}var Ms=ks(0),Ss=ks(1),Ts=(ks(2),ks(3),ks(4)),Ds=(ks(5),ks(6),ys((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Ls=Ds.range,Es=ys((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Es.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ys((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Ns=ys((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}));function Rs(t){return ys((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/xs}))}var Ps=Rs(0),Os=Rs(1),zs=(Rs(2),Rs(3),Rs(4)),Fs=(Rs(5),Rs(6),ys((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function Hs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bs(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Us(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}Fs.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ys((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Ys,Gs,Is,Vs={"-":"",_:" ",0:"0"},Xs=/^\s*\d+/,Ws=/^%/,js=/[\\^$*+?|[\]().{}]/g;function qs(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Zs(t){return t.replace(js,"\\$&")}function $s(t){return new RegExp("^(?:"+t.map(Zs).join("|")+")","i")}function Ks(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Qs(t,e,n){var i=Xs.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Js(t,e,n){var i=Xs.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function ta(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function ea(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function na(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function ia(t,e,n){var i=Xs.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function ra(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function sa(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function aa(t,e,n){var i=Xs.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function oa(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ha(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function la(t,e,n){var i=Xs.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function ua(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ca(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function fa(t,e,n){var i=Xs.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function da(t,e,n){var i=Xs.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function _a(t,e,n){var i=Xs.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function pa(t,e,n){var i=Ws.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ga(t,e,n){var i=Xs.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function ya(t,e,n){var i=Xs.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function ma(t,e){return qs(t.getDate(),e,2)}function va(t,e){return qs(t.getHours(),e,2)}function xa(t,e){return qs(t.getHours()%12||12,e,2)}function ba(t,e){return qs(1+Cs.count(Es(t),t),e,3)}function wa(t,e){return qs(t.getMilliseconds(),e,3)}function Aa(t,e){return wa(t,e)+"000"}function Ca(t,e){return qs(t.getMonth()+1,e,2)}function ka(t,e){return qs(t.getMinutes(),e,2)}function Ma(t,e){return qs(t.getSeconds(),e,2)}function Sa(t){var e=t.getDay();return 0===e?7:e}function Ta(t,e){return qs(Ms.count(Es(t)-1,t),e,2)}function Da(t,e){var n=t.getDay();return t=n>=4||0===n?Ts(t):Ts.ceil(t),qs(Ts.count(Es(t),t)+(4===Es(t).getDay()),e,2)}function La(t){return t.getDay()}function Ea(t,e){return qs(Ss.count(Es(t)-1,t),e,2)}function Na(t,e){return qs(t.getFullYear()%100,e,2)}function Ra(t,e){return qs(t.getFullYear()%1e4,e,4)}function Pa(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qs(e/60|0,"0",2)+qs(e%60,"0",2)}function Oa(t,e){return qs(t.getUTCDate(),e,2)}function za(t,e){return qs(t.getUTCHours(),e,2)}function Fa(t,e){return qs(t.getUTCHours()%12||12,e,2)}function Ha(t,e){return qs(1+Ns.count(Fs(t),t),e,3)}function Ba(t,e){return qs(t.getUTCMilliseconds(),e,3)}function Ua(t,e){return Ba(t,e)+"000"}function Ya(t,e){return qs(t.getUTCMonth()+1,e,2)}function Ga(t,e){return qs(t.getUTCMinutes(),e,2)}function Ia(t,e){return qs(t.getUTCSeconds(),e,2)}function Va(t){var e=t.getUTCDay();return 0===e?7:e}function Xa(t,e){return qs(Ps.count(Fs(t)-1,t),e,2)}function Wa(t,e){var n=t.getUTCDay();return t=n>=4||0===n?zs(t):zs.ceil(t),qs(zs.count(Fs(t),t)+(4===Fs(t).getUTCDay()),e,2)}function ja(t){return t.getUTCDay()}function qa(t,e){return qs(Os.count(Fs(t)-1,t),e,2)}function Za(t,e){return qs(t.getUTCFullYear()%100,e,2)}function $a(t,e){return qs(t.getUTCFullYear()%1e4,e,4)}function Ka(){return"+0000"}function Qa(){return"%"}function Ja(t){return+t}function to(t){return Math.floor(+t/1e3)}!function(t){Ys=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,o=t.months,h=t.shortMonths,l=$s(r),u=Ks(r),c=$s(s),f=Ks(s),d=$s(a),_=Ks(a),p=$s(o),g=Ks(o),y=$s(h),m=Ks(h),v={a:function(t){return a[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:ma,e:ma,f:Aa,H:va,I:xa,j:ba,L:wa,m:Ca,M:ka,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ja,s:to,S:Ma,u:Sa,U:Ta,V:Da,w:La,W:Ea,x:null,X:null,y:Na,Y:Ra,Z:Pa,"%":Qa},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:Oa,e:Oa,f:Ua,H:za,I:Fa,j:Ha,L:Ba,m:Ya,M:Ga,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ja,s:to,S:Ia,u:Va,U:Xa,V:Wa,w:ja,W:qa,x:null,X:null,y:Za,Y:$a,Z:Ka,"%":Qa},b={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=_[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=m[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return C(t,e,n,i)},d:ha,e:ha,f:_a,H:ua,I:ua,j:la,L:da,m:oa,M:ca,p:function(t,e,n){var i=l.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},q:aa,Q:ga,s:ya,S:fa,u:Js,U:ta,V:ea,w:Qs,W:na,x:function(t,e,i){return C(t,n,e,i)},X:function(t,e,n){return C(t,i,e,n)},y:ra,Y:ia,Z:sa,"%":pa};function w(t,e){return function(n){var i,r,s,a=[],o=-1,h=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++o<l;)37===t.charCodeAt(o)&&(a.push(t.slice(h,o)),null!=(r=Vs[i=t.charAt(++o)])?i=t.charAt(++o):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),a.push(i),h=o+1);return a.push(t.slice(h,o)),a.join("")}}function A(t,e){return function(n){var i,r,s=Us(1900,void 0,1);if(C(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!e||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=Bs(Us(s.y,0,1))).getUTCDay(),i=r>4||0===r?Os.ceil(i):Os(i),i=Ns.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=Hs(Us(s.y,0,1))).getDay(),i=r>4||0===r?Ss.ceil(i):Ss(i),i=Cs.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Bs(Us(s.y,0,1)).getUTCDay():Hs(Us(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Bs(s)):Hs(s)}}function C(t,e,n,i){for(var r,s,a=0,o=e.length,h=n.length;a<o;){if(i>=h)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(s=b[r in Vs?e.charAt(a++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return(v.x=w(n,v),v.X=w(i,v),v.c=w(e,v),x.x=w(n,x),x.X=w(i,x),x.c=w(e,x),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=A(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=A(t+="",!0);return e.toString=function(){return t},e}})}(t),Gs=Ys.format,Is=Ys.parse,Ys.utcFormat,Ys.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var eo=1e3,no=60*eo,io=60*no,ro=24*io,so=7*ro,ao=30*ro,oo=365*ro;function ho(t){return new Date(t)}function lo(t){return t instanceof Date?+t:+new Date(+t)}function uo(){return $r.apply(function t(n,i,r,s,a,h,l,u,c){var f=cs(ss,ss),d=f.invert,_=f.domain,p=c(".%L"),g=c(":%S"),y=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),x=c("%b %d"),b=c("%B"),w=c("%Y"),A=[[l,1,eo],[l,5,5*eo],[l,15,15*eo],[l,30,30*eo],[h,1,no],[h,5,5*no],[h,15,15*no],[h,30,30*no],[a,1,io],[a,3,3*io],[a,6,6*io],[a,12,12*io],[s,1,ro],[s,2,2*ro],[r,1,so],[i,1,ao],[i,3,3*ao],[n,1,oo]];function C(t){return(l(t)<t?p:h(t)<t?g:a(t)<t?y:s(t)<t?m:i(t)<t?r(t)<t?v:x:n(t)<t?b:w)(t)}function k(t,i,r,s){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-i)/t,h=e((function(t){return t[2]})).right(A,a);h===A.length?(s=o(i/oo,r/oo,t),t=n):h?(s=(h=A[a/A[h-1][2]<A[h][2]/a?h-1:h])[1],t=h[0]):(s=Math.max(o(i,r,t),1),t=u)}return null==s?t:t.every(s)}return f.invert=function(t){return new Date(d(t))},f.domain=function(t){return arguments.length?_(Qr.call(t,lo)):_().map(ho)},f.ticks=function(t,e){var n,i=_(),r=i[0],s=i[i.length-1],a=s<r;return a&&(n=r,r=s,s=n),n=(n=k(t,r,s,e))?n.range(r,s+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?C:c(e)},f.nice=function(t,e){var n=_();return(t=k(t,n[0],n[n.length-1],e))?_(function(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],a=t[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),t[i]=e.floor(s),t[r]=e.ceil(a),t}(n,t)):f},f.copy=function(){return us(f,t(n,i,r,s,a,h,l,u,c))},f}(Es,Ds,Ms,Cs,As,ws,bs,ms,Gs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function co(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var fo=co("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var _o=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(co);function po(t){return function(){return t}}!function(t){qe(t[t.length-1])}(_o);var go=Math.abs,yo=Math.atan2,mo=Math.cos,vo=Math.max,xo=Math.min,bo=Math.sin,wo=Math.sqrt,Ao=1e-12,Co=Math.PI,ko=Co/2,Mo=2*Co;function So(t){return t>=1?ko:t<=-1?-ko:Math.asin(t)}function To(t){return t.innerRadius}function Do(t){return t.outerRadius}function Lo(t){return t.startAngle}function Eo(t){return t.endAngle}function No(t){return t&&t.padAngle}function Ro(t,e,n,i,r,s,a){var o=t-n,h=e-i,l=(a?s:-s)/wo(o*o+h*h),u=l*h,c=-l*o,f=t+u,d=e+c,_=n+u,p=i+c,g=(f+_)/2,y=(d+p)/2,m=_-f,v=p-d,x=m*m+v*v,b=r-s,w=f*p-_*d,A=(v<0?-1:1)*wo(vo(0,b*b*x-w*w)),C=(w*v-m*A)/x,k=(-w*m-v*A)/x,M=(w*v+m*A)/x,S=(-w*m+v*A)/x,T=C-g,D=k-y,L=M-g,E=S-y;return T*T+D*D>L*L+E*E&&(C=M,k=S),{cx:C,cy:k,x01:-u,y01:-c,x11:C*(r/b-1),y11:k*(r/b-1)}}function Po(){var t=To,e=Do,n=po(0),i=null,r=Lo,s=Eo,a=No,o=null;function h(){var h,l,u=+t.apply(this,arguments),c=+e.apply(this,arguments),f=r.apply(this,arguments)-ko,d=s.apply(this,arguments)-ko,_=go(d-f),p=d>f;if(o||(o=h=Qi()),c<u&&(l=c,c=u,u=l),c>Ao)if(_>Mo-Ao)o.moveTo(c*mo(f),c*bo(f)),o.arc(0,0,c,f,d,!p),u>Ao&&(o.moveTo(u*mo(d),u*bo(d)),o.arc(0,0,u,d,f,p));else{var g,y,m=f,v=d,x=f,b=d,w=_,A=_,C=a.apply(this,arguments)/2,k=C>Ao&&(i?+i.apply(this,arguments):wo(u*u+c*c)),M=xo(go(c-u)/2,+n.apply(this,arguments)),S=M,T=M;if(k>Ao){var D=So(k/u*bo(C)),L=So(k/c*bo(C));(w-=2*D)>Ao?(x+=D*=p?1:-1,b-=D):(w=0,x=b=(f+d)/2),(A-=2*L)>Ao?(m+=L*=p?1:-1,v-=L):(A=0,m=v=(f+d)/2)}var E=c*mo(m),N=c*bo(m),R=u*mo(b),P=u*bo(b);if(M>Ao){var O,z=c*mo(v),F=c*bo(v),H=u*mo(x),B=u*bo(x);if(_<Co&&(O=function(t,e,n,i,r,s,a,o){var h=n-t,l=i-e,u=a-r,c=o-s,f=c*h-u*l;if(!(f*f<Ao))return[t+(f=(u*(e-s)-c*(t-r))/f)*h,e+f*l]}(E,N,H,B,z,F,R,P))){var U=E-O[0],Y=N-O[1],G=z-O[0],I=F-O[1],V=1/bo(function(t){return t>1?0:t<-1?Co:Math.acos(t)}((U*G+Y*I)/(wo(U*U+Y*Y)*wo(G*G+I*I)))/2),X=wo(O[0]*O[0]+O[1]*O[1]);S=xo(M,(u-X)/(V-1)),T=xo(M,(c-X)/(V+1))}}A>Ao?T>Ao?(g=Ro(H,B,E,N,c,T,p),y=Ro(z,F,R,P,c,T,p),o.moveTo(g.cx+g.x01,g.cy+g.y01),T<M?o.arc(g.cx,g.cy,T,yo(g.y01,g.x01),yo(y.y01,y.x01),!p):(o.arc(g.cx,g.cy,T,yo(g.y01,g.x01),yo(g.y11,g.x11),!p),o.arc(0,0,c,yo(g.cy+g.y11,g.cx+g.x11),yo(y.cy+y.y11,y.cx+y.x11),!p),o.arc(y.cx,y.cy,T,yo(y.y11,y.x11),yo(y.y01,y.x01),!p))):(o.moveTo(E,N),o.arc(0,0,c,m,v,!p)):o.moveTo(E,N),u>Ao&&w>Ao?S>Ao?(g=Ro(R,P,z,F,u,-S,p),y=Ro(E,N,H,B,u,-S,p),o.lineTo(g.cx+g.x01,g.cy+g.y01),S<M?o.arc(g.cx,g.cy,S,yo(g.y01,g.x01),yo(y.y01,y.x01),!p):(o.arc(g.cx,g.cy,S,yo(g.y01,g.x01),yo(g.y11,g.x11),!p),o.arc(0,0,u,yo(g.cy+g.y11,g.cx+g.x11),yo(y.cy+y.y11,y.cx+y.x11),p),o.arc(y.cx,y.cy,S,yo(y.y11,y.x11),yo(y.y01,y.x01),!p))):o.arc(0,0,u,b,x,p):o.lineTo(R,P)}else o.moveTo(0,0);if(o.closePath(),h)return o=null,h+""||null}return h.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Co/2;return[mo(i)*n,bo(i)*n]},h.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:po(+e),h):t},h.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:po(+t),h):e},h.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:po(+t),h):n},h.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:po(+t),h):i},h.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:po(+t),h):r},h.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:po(+t),h):s},h.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:po(+t),h):a},h.context=function(t){return arguments.length?(o=null==t?null:t,h):o},h}function Oo(t){this._context=t}function zo(t){return new Oo(t)}function Fo(t){return t[0]}function Ho(t){return t[1]}function Bo(){var t=Fo,e=Ho,n=po(!0),i=null,r=zo,s=null;function a(a){var o,h,l,u=a.length,c=!1;for(null==i&&(s=r(l=Qi())),o=0;o<=u;++o)!(o<u&&n(h=a[o],o,a))===c&&((c=!c)?s.lineStart():s.lineEnd()),c&&s.point(+t(h,o,a),+e(h,o,a));if(l)return s=null,l+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:po(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:po(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:po(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),a):i},a}function Uo(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Yo(t){return t}Oo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Go=Array.prototype.slice;function Io(){}function Vo(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Xo(t){this._context=t}function Wo(t){return new Xo(t)}function jo(t){this._context=t}function qo(t){return new jo(t)}function Zo(t){this._context=t}function $o(t){return new Zo(t)}function Ko(t,e){this._basis=new Xo(t),this._beta=e}Xo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vo(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},jo.prototype={areaStart:Io,areaEnd:Io,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Vo(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Zo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Vo(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Ko.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],s=e[0],a=t[n]-r,o=e[n]-s,h=-1;++h<=n;)i=h/n,this._basis.point(this._beta*t[h]+(1-this._beta)*(r+i*a),this._beta*e[h]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Qo=function t(e){function n(t){return 1===e?new Xo(t):new Ko(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Jo(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function th(t,e){this._context=t,this._k=(1-e)/6}th.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Jo(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Jo(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var eh=function t(e){function n(t){return new th(t,e)}return n.tension=function(e){return t(+e)},n}(0);function nh(t,e){this._context=t,this._k=(1-e)/6}nh.prototype={areaStart:Io,areaEnd:Io,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Jo(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ih=function t(e){function n(t){return new nh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function rh(t,e){this._context=t,this._k=(1-e)/6}rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jo(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sh=function t(e){function n(t){return new rh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ah(t){this._context=t}function oh(t){return new ah(t)}function hh(t){return t<0?-1:1}function lh(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(hh(s)+hh(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function uh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ch(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,o=(s-i)/3;t._context.bezierCurveTo(i+o,r+o*e,s-o,a-o*n,s,a)}function fh(t){this._context=t}function dh(t){this._context=t}function _h(t){return new fh(t)}function ph(t,e){this._context=t,this._t=e}function gh(t){return new ph(t,.5)}function yh(t){return new ph(t,0)}function mh(t){return new ph(t,1)}function vh(t,e){if((r=t.length)>1)for(var n,i,r,s=1,a=t[e[0]],o=a.length;s<r;++s)for(i=a,a=t[e[s]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function xh(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function bh(t,e){return t[e]}function wh(t){return function(){return t}}function Ah(t,e,n){this.target=t,this.type=e,this.transform=n}function Ch(t,e,n){this.k=t,this.x=e,this.y=n}ah.prototype={areaStart:Io,areaEnd:Io,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ch(this,this._t0,uh(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ch(this,uh(this,n=lh(this,t,e)),n);break;default:ch(this,this._t0,n=lh(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new dh(t)}.prototype=Object.create(fh.prototype)).point=function(t,e){fh.prototype.point.call(this,e,t)},dh.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}},ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},Ch.prototype={constructor:Ch,scale:function(t){return 1===t?this:new Ch(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ch(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kh=new Ch(1,0,0);function Mh(){Dt.stopImmediatePropagation()}function Sh(){Dt.preventDefault(),Dt.stopImmediatePropagation()}function Th(){return!Dt.ctrlKey&&!Dt.button}function Dh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Lh(){return this.__zoom||kh}function Eh(){return-Dt.deltaY*(1===Dt.deltaMode?.05:Dt.deltaMode?1:.002)}function Nh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rh(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Ph(){var t,e,n=Th,i=Dh,r=Rh,s=Eh,a=Nh,o=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],l=250,u=xn,c=M("start","zoom","end"),f=500,d=150,_=0;function p(t){t.property("__zoom",Lh).on("wheel.zoom",w).on("mousedown.zoom",A).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",k).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new Ch(e,t.x,t.y)}function y(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new Ch(t.k,i,r)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function v(t,e,n){t.on("start.zoom",(function(){x(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).end()})).tween("zoom",(function(){var t=this,r=arguments,s=x(t,r),a=i.apply(t,r),o=null==n?m(a):"function"==typeof n?n.apply(t,r):n,h=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=t.__zoom,c="function"==typeof e?e.apply(t,r):e,f=u(l.invert(o).concat(h/l.k),c.invert(o).concat(h/c.k));return function(t){if(1===t)t=c;else{var e=f(t),n=h/e[2];t=new Ch(n,o[0]-e[0]*n,o[1]-e[1]*n)}s.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.extent=i.apply(t,e),this.taps=0}function w(){if(n.apply(this,arguments)){var t=x(this,arguments),e=this.__zoom,i=Math.max(o[0],Math.min(o[1],e.k*Math.pow(2,s.apply(this,arguments)))),a=Vt(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[a,e.invert(a)],ti(this),t.start()}Sh(),t.wheel=setTimeout((function(){t.wheel=null,t.end()}),d),t.zoom("mouse",r(y(g(e,i),t.mouse[0],t.mouse[1]),t.extent,h))}}function A(){if(!e&&n.apply(this,arguments)){var t=x(this,arguments,!0),i=Yt(Dt.view).on("mousemove.zoom",(function(){if(Sh(),!t.moved){var e=Dt.clientX-a,n=Dt.clientY-o;t.moved=e*e+n*n>_}t.zoom("mouse",r(y(t.that.__zoom,t.mouse[0]=Vt(t.that),t.mouse[1]),t.extent,h))}),!0).on("mouseup.zoom",(function(){i.on("mousemove.zoom mouseup.zoom",null),qt(Dt.view,t.moved),Sh(),t.end()}),!0),s=Vt(this),a=Dt.clientX,o=Dt.clientY;jt(Dt.view),Mh(),t.mouse=[s,this.__zoom.invert(s)],ti(this),t.start()}}function C(){if(n.apply(this,arguments)){var t=this.__zoom,e=Vt(this),s=t.invert(e),a=t.k*(Dt.shiftKey?.5:2),o=r(y(g(t,a),e,s),i.apply(this,arguments),h);Sh(),l>0?Yt(this).transition().duration(l).call(v,o,e):Yt(this).call(p.transform,o)}}function k(){if(n.apply(this,arguments)){var e,i,r,s,a=Dt.touches,o=a.length,h=x(this,arguments,Dt.changedTouches.length===o);for(Mh(),i=0;i<o;++i)s=[s=Xt(this,a,(r=a[i]).identifier),this.__zoom.invert(s),r.identifier],h.touch0?h.touch1||h.touch0[2]===s[2]||(h.touch1=s,h.taps=0):(h.touch0=s,e=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(h.taps<2&&(t=setTimeout((function(){t=null}),f)),ti(this),h.start())}}function S(){if(this.__zooming){var e,n,i,s,a=x(this,arguments),o=Dt.changedTouches,l=o.length;for(Sh(),t&&(t=clearTimeout(t)),a.taps=0,e=0;e<l;++e)i=Xt(this,o,(n=o[e]).identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=i);if(n=a.that.__zoom,a.touch1){var u=a.touch0[0],c=a.touch0[1],f=a.touch1[0],d=a.touch1[1],_=(_=f[0]-u[0])*_+(_=f[1]-u[1])*_,p=(p=d[0]-c[0])*p+(p=d[1]-c[1])*p;n=g(n,Math.sqrt(_/p)),i=[(u[0]+f[0])/2,(u[1]+f[1])/2],s=[(c[0]+d[0])/2,(c[1]+d[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",r(y(n,i,s),a.extent,h))}}function T(){if(this.__zooming){var t,n,i=x(this,arguments),r=Dt.changedTouches,s=r.length;for(Mh(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),f),t=0;t<s;++t)n=r[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var a=Yt(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return p.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",Lh),t!==i?v(t,e,n):i.interrupt().each((function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},p.scaleBy=function(t,e,n){p.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},p.scaleTo=function(t,e,n){p.transform(t,(function(){var t=i.apply(this,arguments),s=this.__zoom,a=null==n?m(t):"function"==typeof n?n.apply(this,arguments):n,o=s.invert(a),l="function"==typeof e?e.apply(this,arguments):e;return r(y(g(s,l),a,o),t,h)}),n)},p.translateBy=function(t,e,n){p.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),h)}))},p.translateTo=function(t,e,n,s){p.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,o=null==s?m(t):"function"==typeof s?s.apply(this,arguments):s;return r(kh.translate(o[0],o[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,h)}),s)},b.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){Pt(new Ah(p,t,this.that.__zoom),c.apply,c,[t,this.that,this.args])}},p.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:wh(+t),p):s},p.filter=function(t){return arguments.length?(n="function"==typeof t?t:wh(!!t),p):n},p.touchable=function(t){return arguments.length?(a="function"==typeof t?t:wh(!!t),p):a},p.extent=function(t){return arguments.length?(i="function"==typeof t?t:wh([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),p):i},p.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],p):[o[0],o[1]]},p.translateExtent=function(t){return arguments.length?(h[0][0]=+t[0][0],h[1][0]=+t[1][0],h[0][1]=+t[0][1],h[1][1]=+t[1][1],p):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},p.constrain=function(t){return arguments.length?(r=t,p):r},p.duration=function(t){return arguments.length?(l=+t,p):l},p.interpolate=function(t){return arguments.length?(u=t,p):u},p.on=function(){var t=c.on.apply(c,arguments);return t===c?p:t},p.clickDistance=function(t){return arguments.length?(_=(t=+t)*t,p):Math.sqrt(_)},p}var Oh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function zh(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var Fh=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){t.exports=function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){if(!o&&zh)return zh();if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return r(e[a][1][t]||t)}),l,l.exports,t,e,n,i)}return n[a].exports}for(var s=zh,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){e.exports=t("./src/crossfilter").crossfilter},{"./src/crossfilter":6}],2:[function(t,e,n){(function(t){var n,i="Expected a function",r="__lodash_hash_undefined__",s=1/0,a="[object Function]",o="[object GeneratorFunction]",h="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,_=/^\[object .+?Constructor\]$/,p="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,y=p||g||Function("return this")(),m=Array.prototype,v=Function.prototype,x=Object.prototype,b=y["__core-js_shared__"],w=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",A=v.toString,C=x.hasOwnProperty,k=x.toString,M=RegExp("^"+A.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=y.Symbol,T=m.splice,D=B(y,"Map"),L=B(Object,"create"),E=S?S.prototype:void 0,N=E?E.toString:void 0;function R(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function P(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function O(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function z(t,e){for(var n,i,r=t.length;r--;)if((n=t[r][0])===(i=e)||n!=n&&i!=i)return r;return-1}function F(t){return!(!X(t)||(e=t,w&&w in e))&&(V(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?M:_).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function H(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function B(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return F(n)?n:void 0}R.prototype.clear=function(){this.__data__=L?L(null):{}},R.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},R.prototype.get=function(t){var e=this.__data__;if(L){var n=e[t];return n===r?void 0:n}return C.call(e,t)?e[t]:void 0},R.prototype.has=function(t){var e=this.__data__;return L?void 0!==e[t]:C.call(e,t)},R.prototype.set=function(t,e){return this.__data__[t]=L&&void 0===e?r:e,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(t){var e=this.__data__,n=z(e,t);return!(n<0||(n==e.length-1?e.pop():T.call(e,n,1),0))},P.prototype.get=function(t){var e=this.__data__,n=z(e,t);return n<0?void 0:e[n][1]},P.prototype.has=function(t){return z(this.__data__,t)>-1},P.prototype.set=function(t,e){var n=this.__data__,i=z(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},O.prototype.clear=function(){this.__data__={hash:new R,map:new(D||P),string:new R}},O.prototype.delete=function(t){return H(this,t).delete(t)},O.prototype.get=function(t){return H(this,t).get(t)},O.prototype.has=function(t){return H(this,t).has(t)},O.prototype.set=function(t,e){return H(this,t).set(t,e),this};var U=G((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(W(t))return N?N.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}(e);var n=[];return c.test(t)&&n.push(""),t.replace(f,(function(t,e,i,r){n.push(i?r.replace(d,"$1"):e||t)})),n}));function Y(t){if("string"==typeof t||W(t))return t;var e=t+"";return"0"==e&&1/t==-s?"-0":e}function G(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var a=t.apply(this,i);return n.cache=s.set(r,a),a};return n.cache=new(G.Cache||O),n}G.Cache=O;var I=Array.isArray;function V(t){var e=X(t)?k.call(t):"";return e==a||e==o}function X(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function W(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&k.call(t)==h}e.exports=function(t,e,n){var i=-1,r=(e=function(t,e){if(I(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!W(t))||u.test(t)||!l.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return I(t)?t:U(t)}(e)).length;for(r||(t=void 0,r=1);++i<r;){var s=null==t?void 0:t[Y(e[i])];void 0===s&&(i=r,s=n),t=V(s)?s.call(t):s}return t}}).call(this,void 0!==Oh?Oh:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){e.exports={version:"1.4.7"}},{}],4:[function(t,e,n){if("undefined"!=typeof Uint8Array)var i=function(t){return new Uint8Array(t)},r=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},s=function(t,e){var n,i;switch(e){case 16:i=t.length,n=new Uint16Array(i);break;case 32:n=function(t){return new Uint32Array(t)}(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n};function a(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function o(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=i(t)}o.prototype.lengthen=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)this[e]=r(this[e],t);this.length=t},o.prototype.add=function(){var t,e,n,r,a;for(r=0,a=this.subarrays;r<a;++r)if(n=~(t=this.masks[r])&-~t,!((e=this.width-32*r)>=32)||n)return e<32&&n&1<<e&&(this[r]=s(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=n,{offset:r,one:n};return this[this.subarrays]=i(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},o.prototype.copy=function(t,e){var n,i;for(n=0,i=this.subarrays;n<i;++n)this[n][t]=this[n][e]},o.prototype.truncate=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e){for(var i=this.length-1;i>=t;i--)this[e][i]=0;this[e].length=t}this.length=t},o.prototype.zero=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)if(this[e][t])return!1;return!0},o.prototype.zeroExcept=function(t,e,n){var i,r;for(i=0,r=this.subarrays;i<r;++i)if(i===e?this[i][t]&n:this[i][t])return!1;return!0},o.prototype.zeroExceptMask=function(t,e){var n,i;for(n=0,i=this.subarrays;n<i;++n)if(this[n][t]&e[n])return!1;return!0},o.prototype.only=function(t,e,n){var i,r;for(i=0,r=this.subarrays;i<r;++i)if(this[i][t]!=(i===e?n:0))return!1;return!0},o.prototype.onlyExcept=function(t,e,n,i,r){var s,a,o;for(a=0,o=this.subarrays;a<o;++a)if(s=this[a][t],a===e&&(s&=n),s!=(a===i?r:0))return!1;return!0},e.exports={array8:a,array16:a,array32:a,arrayLengthen:function(t,e){for(var n=t.length;n<e;)t[n++]=0;return t},arrayWiden:function(t,e){if(e>32)throw new Error("invalid array width!");return t},bitarray:o}},{}],5:[function(t,e,n){var i=t("./identity");function r(t){function e(e,n,i,r){for(;i<r;){var s=i+r>>>1;n<t(e[s])?r=s:i=s+1}return i}return e.right=e,e.left=function(e,n,i,r){for(;i<r;){var s=i+r>>>1;t(e[s])<n?i=s+1:r=s}return i},e}e.exports=r(i),e.exports.by=r},{"./identity":10}],6:[function(t,e,n){var i=t("./array"),r=t("./filter"),s=t("./identity"),a=t("./null"),o=t("./zero"),h=t("./heapselect"),l=t("./heap"),u=t("./bisect"),c=t("./insertionsort"),f=t("./permute"),d=t("./quicksort"),_=t("./reduce"),p=t("./../package.json"),g=t("lodash.result"),y=-1;function m(t,e){return(e<257?i.array8:e<65537?i.array16:i.array32)(t)}function v(t){for(var e=m(t,t),n=-1;++n<t;)e[n]=n;return e}function x(t){return 8===t?256:16===t?65536:4294967296}n.crossfilter=function(){var t,e={add:C,remove:function(e){for(var i=m(c,c),r=[],s="function"==typeof e,a=0,o=0;a<c;++a)h=a,(s?e(n[h],h):t.zero(h))?(r.push(a),i[a]=y):i[a]=o++;var h;p.forEach((function(t){t(-1,-1,[],r,!0)})),w.forEach((function(t){t(i)}));for(var l=0,u=0;l<c;++l)i[l]!==y&&(l!==u&&(t.copy(u,l),n[u]=n[l]),++u);n.length=c=u,t.truncate(u),M("dataRemoved")},dimension:function(e,A){if("string"==typeof e){var C=e;e=function(t){return g(t,C)}}var k,S,T,D,L,E,N,R,P,O,z,F,H,B,U,Y,G={filter:function(t){return null==t?rt():Array.isArray(t)?it(t):"function"==typeof t?st(t):nt(t)},filterExact:nt,filterRange:it,filterFunction:st,filterAll:rt,currentFilter:function(){return B},hasCurrentFilter:function(){return U},top:function(e,i){var r,s=[],a=Z,o=0;for(i&&i>0&&(o=i);--a>=q&&e>0;)t.zero(r=E[a])&&(o>0?--o:(s.push(n[r]),--e));if(A)for(a=0;a<I.length&&e>0;a++)t.zero(r=I[a])&&(o>0?--o:(s.push(n[r]),--e));return s},bottom:function(e,i){var r,s,a=[],o=0;if(i&&i>0&&(o=i),A)for(r=0;r<I.length&&e>0;r++)t.zero(s=I[r])&&(o>0?--o:(a.push(n[s]),--e));for(r=q;r<Z&&e>0;)t.zero(s=E[r])&&(o>0?--o:(a.push(n[s]),--e)),r++;return a},group:ot,groupAll:function(){var t=ot(a),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:ht,remove:ht,accessor:e,id:function(){return D}},I=[],V=d.by((function(t){return N[t]})),X=r.filterAll,W=[],j=[],q=0,Z=0,$=0;b.unshift(Q),b.push(J),w.push(tt);var K=t.add();function Q(n,r,s){if(A){$=0,B=0,Y=[];for(var a=0;a<n.length;a++)for(B=0,Y=e(n[a]);B<Y.length;B++)$++;N=[],O=v(n.length),F=m($,1);for(var o=v($),h=0,l=0;l<n.length;l++)if((Y=e(n[l])).length)for(O[l]=Y.length,B=0;B<Y.length;B++)N.push(Y[B]),o[h]=l,h++;else O[l]=0,I.push(l+r);var u=V(v($),0,$);N=f(N,u),R=f(o,u)}else N=n.map(e),R=V(v(s),0,s),N=f(N,R);A&&(s=$);var d=X(N),_=d[0],p=d[1];if(H)for(var g=0;g<s;++g)H(N[g],g)||(t[T][R[g]+r]|=k,A&&(F[g]=1));else{for(var y=0;y<_;++y)t[T][R[y]+r]|=k,A&&(F[y]=1);for(var x=p;x<s;++x)t[T][R[x]+r]|=k,A&&(F[x]=1)}if(!r)return L=N,E=R,P=O,z=F,q=_,void(Z=p);var b,w=L,C=E,M=z,S=0;if(a=0,A&&(b=r,r=w.length,s=$),L=A?new Array(r+s):new Array(c),E=A?new Array(r+s):m(c,c),A&&(z=m(r+s,1)),A){var D=P.length;P=i.arrayLengthen(P,c);for(var B=0;B+D<c;B++)P[B+D]=O[B]}for(var U=0;a<r&&S<s;++U)w[a]<N[S]?(L[U]=w[a],A&&(z[U]=M[a]),E[U]=C[a++]):(L[U]=N[S],A&&(z[U]=F[S]),E[U]=R[S++]+(A?b:r));for(;a<r;++a,++U)L[U]=w[a],A&&(z[U]=M[a]),E[U]=C[a];for(;S<s;++S,++U)L[U]=N[S],A&&(z[U]=F[S]),E[U]=R[S]+(A?b:r);d=X(L),q=d[0],Z=d[1]}function J(t,e,n){W.forEach((function(t){t(N,R,e,n)})),N=R=null}function tt(t){if(A){for(var e=0,n=0;e<I.length;e++)t[I[e]]!==y&&(I[n]=t[I[e]],n++);for(I.length=n,e=0,n=0;e<c;e++)t[e]!==y&&(n!==e&&(P[n]=P[e]),n++);P.length=n}for(var i,r=L.length,s=0,a=0;s<r;++s)t[i=E[s]]!==y&&(s!==a&&(L[a]=L[s]),E[a]=t[i],A&&(z[a]=z[s]),++a);for(L.length=a,A&&(z.length=a);a<r;)E[a++]=0;var o=X(L);q=o[0],Z=o[1]}function et(e){var n=e[0],i=e[1];if(H)return H=null,at((function(t,e){return n<=e&&e<i}),0===e[0]&&e[1]===L.length),q=n,Z=i,G;var r,s,a,o=[],h=[],l=[],u=[];if(n<q)for(r=n,s=Math.min(q,i);r<s;++r)o.push(E[r]),l.push(r);else if(n>q)for(r=q,s=Math.min(n,Z);r<s;++r)h.push(E[r]),u.push(r);if(i>Z)for(r=Math.max(n,Z),s=i;r<s;++r)o.push(E[r]),l.push(r);else if(i<Z)for(r=Math.max(q,i),s=Z;r<s;++r)h.push(E[r]),u.push(r);if(A){var c=[],f=[];for(r=0;r<o.length;r++)P[o[r]]++,z[l[r]]=0,1===P[o[r]]&&(t[T][o[r]]^=k,c.push(o[r]));for(r=0;r<h.length;r++)P[h[r]]--,z[u[r]]=1,0===P[h[r]]&&(t[T][h[r]]^=k,f.push(h[r]));if(o=c,h=f,0===e[0]&&e[1]===L.length)for(r=0;r<I.length;r++)t[T][a=I[r]]&k&&(t[T][a]^=k,o.push(a));else for(r=0;r<I.length;r++)t[T][a=I[r]]&k||(t[T][a]^=k,h.push(a))}else{for(r=0;r<o.length;r++)t[T][o[r]]^=k;for(r=0;r<h.length;r++)t[T][h[r]]^=k}return q=n,Z=i,p.forEach((function(t){t(k,T,o,h)})),M("filtered"),G}function nt(t){return B=t,U=!0,et((X=r.filterExact(u,t))(L))}function it(t){return B=t,U=!0,et((X=r.filterRange(u,t))(L))}function rt(){return B=void 0,U=!1,et((X=r.filterAll)(L))}function st(t){B=t,U=!0,H=t,X=r.filterAll,at(t,!1);var e=X(L);return q=e[0],Z=e[1],G}function at(e,n){var i,r,s,a=[],o=[],h=[],l=[],u=L.length;if(!A)for(i=0;i<u;++i)!(t[T][r=E[i]]&k)^!!(s=e(L[i],i))&&(s?a.push(r):o.push(r));if(A)for(i=0;i<u;++i)e(L[i],i)?(a.push(E[i]),h.push(i)):(o.push(E[i]),l.push(i));if(A){var c=[],f=[];for(i=0;i<a.length;i++)1===z[h[i]]&&(P[a[i]]++,z[h[i]]=0,1===P[a[i]]&&(t[T][a[i]]^=k,c.push(a[i])));for(i=0;i<o.length;i++)0===z[l[i]]&&(P[o[i]]--,z[l[i]]=1,0===P[o[i]]&&(t[T][o[i]]^=k,f.push(o[i])));if(a=c,o=f,n)for(i=0;i<I.length;i++)t[T][r=I[i]]&k&&(t[T][r]^=k,a.push(r));else for(i=0;i<I.length;i++)t[T][r=I[i]]&k||(t[T][r]^=k,o.push(r))}else{for(i=0;i<a.length;i++)t[T][a[i]]&k&&(t[T][a[i]]&=S);for(i=0;i<o.length;i++)t[T][o[i]]&k||(t[T][o[i]]|=k)}p.forEach((function(t){t(k,T,a,o)})),M("filtered")}function ot(e){var r={top:function(t){var e=d(V(),0,u.length,t);return g.sort(e,0,e.length)},all:V,reduce:X,reduceCount:q,reduceSum:function(t){return X(_.reduceAdd(t),_.reduceSubtract(t),o)},order:Z,orderNatural:function(){return Z(s)},size:function(){return R},dispose:$,remove:$};j.push(r);var u,f,d,g,v,b,C,M,D=8,N=x(D),R=0,P=a,O=a,z=!0,F=e===a;function H(r,s,o,h){A&&(M=o,o=L.length-r.length,h=r.length);var l,d,_,g,y,w,k=u,E=A?[]:m(R,N),H=v,B=b,V=C,X=R,W=0,j=0;for(z&&(H=V=a),z&&(B=V=a),u=new Array(R),R=0,f=A?X?f:[]:X>1?i.arrayLengthen(f,c):m(c,N),X&&(_=(d=k[0]).key);j<h&&!((g=e(r[j]))>=g);)++j;for(;j<h;){for(d&&_<=g?(y=d,w=_,E[W]=R,(d=k[++W])&&(_=d.key)):(y={key:g,value:V()},w=g),u[R]=y;g<=w&&(l=s[j]+(A?M:o),A?f[l]?f[l].push(R):f[l]=[R]:f[l]=R,y.value=H(y.value,n[l],!0),t.zeroExcept(l,T,S)||(y.value=B(y.value,n[l],!1)),!(++j>=h));)g=e(r[j]);Z()}for(;W<X;)u[E[W]=R]=k[W++],Z();if(A)for(var q=0;q<c;q++)f[q]||(f[q]=[]);if(R>W)if(A)for(W=0;W<M;++W)for(q=0;q<f[W].length;q++)f[W][q]=E[f[W][q]];else for(W=0;W<o;++W)f[W]=E[f[W]];function Z(){A?R++:++R===N&&(E=i.arrayWiden(E,D<<=1),f=i.arrayWiden(f,D),N=x(D))}l=p.indexOf(P),R>1||A?(P=U,O=G):(!R&&F&&(R=1,u=[{key:null,value:V()}]),1===R?(P=Y,O=I):(P=a,O=a),f=null),p[l]=P}function B(t){if(R>1||A){var e,n,i,r=R,s=u,o=m(r,r);if(A){for(e=0,i=0;e<c;++e)if(t[e]!==y){for(f[i]=f[e],n=0;n<f[i].length;n++)o[f[i][n]]=1;++i}}else for(e=0,i=0;e<c;++e)t[e]!==y&&(o[f[i]=f[e]]=1,++i);for(u=[],R=0,e=0;e<r;++e)o[e]&&(o[e]=R++,u.push(s[e]));if(R>1||A)if(A)for(e=0;e<i;++e)for(n=0;n<f[e].length;++n)f[e][n]=o[f[e][n]];else for(e=0;e<i;++e)f[e]=o[f[e]];else f=null;p[p.indexOf(P)]=R>1||A?(O=G,P=U):1===R?(O=I,P=Y):O=P=a}else if(1===R){if(F)return;for(var h=0;h<c;++h)if(t[h]!==y)return;u=[],R=0,p[p.indexOf(P)]=P=O=a}}function U(e,i,r,s,a){var o,h,l,c,d;if(!(e===k&&i===T||z))if(A){for(o=0,c=r.length;o<c;++o)if(t.zeroExcept(l=r[o],T,S))for(h=0;h<f[l].length;h++)(d=u[f[l][h]]).value=v(d.value,n[l],!1,h);for(o=0,c=s.length;o<c;++o)if(t.onlyExcept(l=s[o],T,S,i,e))for(h=0;h<f[l].length;h++)(d=u[f[l][h]]).value=b(d.value,n[l],a,h)}else{for(o=0,c=r.length;o<c;++o)t.zeroExcept(l=r[o],T,S)&&((d=u[f[l]]).value=v(d.value,n[l],!1));for(o=0,c=s.length;o<c;++o)t.onlyExcept(l=s[o],T,S,i,e)&&((d=u[f[l]]).value=b(d.value,n[l],a))}}function Y(e,i,r,s,a){if(!(e===k&&i===T||z)){var o,h,l,c=u[0];for(o=0,l=r.length;o<l;++o)t.zeroExcept(h=r[o],T,S)&&(c.value=v(c.value,n[h],!1));for(o=0,l=s.length;o<l;++o)t.onlyExcept(h=s[o],T,S,i,e)&&(c.value=b(c.value,n[h],a))}}function G(){var e,i,r;for(e=0;e<R;++e)u[e].value=C();if(A){for(e=0;e<c;++e)for(i=0;i<f[e].length;i++)(r=u[f[e][i]]).value=v(r.value,n[e],!0,i);for(e=0;e<c;++e)if(!t.zeroExcept(e,T,S))for(i=0;i<f[e].length;i++)(r=u[f[e][i]]).value=b(r.value,n[e],!1,i)}else{for(e=0;e<c;++e)(r=u[f[e]]).value=v(r.value,n[e],!0);for(e=0;e<c;++e)t.zeroExcept(e,T,S)||((r=u[f[e]]).value=b(r.value,n[e],!1))}}function I(){var e,i=u[0];for(i.value=C(),e=0;e<c;++e)i.value=v(i.value,n[e],!0);for(e=0;e<c;++e)t.zeroExcept(e,T,S)||(i.value=b(i.value,n[e],!1))}function V(){return z&&(O(),z=!1),u}function X(t,e,n){return v=t,b=e,C=n,z=!0,r}function q(){return X(_.reduceIncrement,_.reduceDecrement,o)}function Z(t){function e(e){return t(e.value)}return d=h.by(e),g=l.by(e),r}function $(){var t=p.indexOf(P);return t>=0&&p.splice(t,1),(t=W.indexOf(H))>=0&&W.splice(t,1),(t=w.indexOf(B))>=0&&w.splice(t,1),(t=j.indexOf(r))>=0&&j.splice(t,1),r}return arguments.length<1&&(e=s),p.push(P),W.push(H),w.push(B),H(L,E,0,c),q().orderNatural()}function ht(){j.forEach((function(t){t.dispose()}));var e=b.indexOf(Q);return e>=0&&b.splice(e,1),(e=b.indexOf(J))>=0&&b.splice(e,1),(e=w.indexOf(tt))>=0&&w.splice(e,1),t.masks[T]&=S,rt()}return T=K.offset,k=K.one,S=~k,D=T<<7|Math.log(k)/Math.log(2),Q(n,0,c),J(0,0,c),G},groupAll:function(){var e,i,r,s,a={reduce:f,reduceCount:d,reduceSum:function(t){return f(_.reduceAdd(t),_.reduceSubtract(t),o)},value:function(){return h&&(function(){var a;for(e=s(),a=0;a<c;++a)e=i(e,n[a],!0),t.zero(a)||(e=r(e,n[a],!1))}(),h=!1),e},dispose:g,remove:g},h=!0;function l(s,a){var o;if(!h)for(o=a;o<c;++o)e=i(e,n[o],!0),t.zero(o)||(e=r(e,n[o],!1))}function u(s,a,o,l,u){var c,f,d;if(!h){for(c=0,d=o.length;c<d;++c)t.zero(f=o[c])&&(e=i(e,n[f],u));for(c=0,d=l.length;c<d;++c)t.only(f=l[c],a,s)&&(e=r(e,n[f],u))}}function f(t,e,n){return i=t,r=e,s=n,h=!0,a}function d(){return f(_.reduceIncrement,_.reduceDecrement,o)}function g(){var t=p.indexOf(u);return t>=0&&p.splice(t,1),(t=b.indexOf(l))>=0&&b.splice(t,1),a}return(p.push(u),b.push(l),l(0,0),d())},size:function(){return c},all:function(){return n},allFiltered:function(e){var i=[],r=0,s=k(e||[]);for(r=0;r<c;r++)t.zeroExceptMask(r,s)&&i.push(n[r]);return i},onChange:function(t){if("function"==typeof t)return A.push(t),function(){A.splice(A.indexOf(t),1)};console.warn("onChange callback parameter must be a function!")},isElementFiltered:function(e,n){var i=k(n||[]);return t.zeroExceptMask(e,i)}},n=[],c=0,p=[],b=[],w=[],A=[];function C(i){var r=c,s=i.length;return s&&(n=n.concat(i),t.lengthen(c+=s),b.forEach((function(t){t(i,r,s)})),M("dataAdded")),e}function k(e){var n,i,r,s,a=Array(t.subarrays);for(n=0;n<t.subarrays;n++)a[n]=-1;for(i=0,r=e.length;i<r;i++)a[(s=e[i].id())>>7]&=~(1<<(63&s));return a}function M(t){for(var e=0;e<A.length;e++)A[e](t)}return t=new i.bitarray(0),arguments.length?C(arguments[0]):e},n.crossfilter.heap=l,n.crossfilter.heapselect=h,n.crossfilter.bisect=u,n.crossfilter.insertionsort=c,n.crossfilter.permute=f,n.crossfilter.quicksort=d,n.crossfilter.version=p.version},{"./../package.json":3,"./array":4,"./bisect":5,"./filter":7,"./heap":8,"./heapselect":9,"./identity":10,"./insertionsort":11,"./null":12,"./permute":13,"./quicksort":14,"./reduce":15,"./zero":16,"lodash.result":2}],7:[function(t,e,n){e.exports={filterExact:function(t,e){return function(n){var i=n.length;return[t.left(n,e,0,i),t.right(n,e,0,i)]}},filterRange:function(t,e){var n=e[0],i=e[1];return function(e){var r=e.length;return[t.left(e,n,0,r),t.left(e,i,0,r)]}},filterAll:function(t){return[0,t.length]}}},{}],8:[function(t,e,n){var i=t("./identity");function r(t){function e(t,e,i){for(var r=i-e,s=1+(r>>>1);--s>0;)n(t,s,r,e);return t}function n(e,n,i,r){for(var s,a=e[--r+n],o=t(a);(s=n<<1)<=i&&(s<i&&t(e[r+s])>t(e[r+s+1])&&s++,!(o<=t(e[r+s])));)e[r+n]=e[r+s],n=s;e[r+n]=a}return e.sort=function(t,e,i){for(var r,s=i-e;--s>0;)r=t[e],t[e]=t[e+s],t[e+s]=r,n(t,1,s,e);return t},e}e.exports=r(i),e.exports.by=r},{"./identity":10}],9:[function(t,e,n){var i=t("./identity"),r=t("./heap");function s(t){var e=r.by(t);return function(n,i,r,s){var a,o,h,l=new Array(s=Math.min(r-i,s));for(o=0;o<s;++o)l[o]=n[i++];if(e(l,0,s),i<r){a=t(l[0]);do{t(h=n[i])>a&&(l[0]=h,a=t(e(l,0,s)[0]))}while(++i<r)}return l}}e.exports=s(i),e.exports.by=s},{"./heap":8,"./identity":10}],10:[function(t,e,n){e.exports=function(t){return t}},{}],11:[function(t,e,n){var i=t("./identity");function r(t){return function(e,n,i){for(var r=n+1;r<i;++r){for(var s=r,a=e[r],o=t(a);s>n&&t(e[s-1])>o;--s)e[s]=e[s-1];e[s]=a}return e}}e.exports=r(i),e.exports.by=r},{"./identity":10}],12:[function(t,e,n){e.exports=function(){return null}},{}],13:[function(t,e,n){e.exports=function(t,e,n){for(var i=0,r=e.length,s=n?JSON.parse(JSON.stringify(t)):new Array(r);i<r;++i)s[i]=t[e[i]];return s}},{}],14:[function(t,e,n){var i=t("./identity"),r=t("./insertionsort");function s(t){var e=r.by(t);function n(t,n,r){return(r-n<a?e:i)(t,n,r)}function i(e,i,r){var s,a=(r-i)/6|0,o=i+a,h=r-1-a,l=i+r-1>>1,u=l-a,c=l+a,f=e[o],d=t(f),_=e[u],p=t(_),g=e[l],y=t(g),m=e[c],v=t(m),x=e[h],b=t(x);d>p&&(s=f,f=_,_=s,s=d,d=p,p=s),v>b&&(s=m,m=x,x=s,s=v,v=b,b=s),d>y&&(s=f,f=g,g=s,s=d,d=y,y=s),p>y&&(s=_,_=g,g=s,s=p,p=y,y=s),d>v&&(s=f,f=m,m=s,s=d,d=v,v=s),y>v&&(s=g,g=m,m=s,s=y,y=v,v=s),p>b&&(s=_,_=x,x=s,s=p,p=b,b=s),p>y&&(s=_,_=g,g=s,s=p,p=y,y=s),v>b&&(s=m,m=x,x=s,s=v,v=b,b=s);var w=_,A=p,C=m,k=v;e[o]=f,e[u]=e[i],e[l]=g,e[c]=e[r-1],e[h]=x;var M=i+1,S=r-2,T=A<=k&&A>=k;if(T)for(var D=M;D<=S;++D){var L=e[D],E=t(L);if(E<A)D!==M&&(e[D]=e[M],e[M]=L),++M;else if(E>A)for(;;){var N=t(e[S]);if(!(N>A)){if(N<A){e[D]=e[M],e[M++]=e[S],e[S--]=L;break}e[D]=e[S],e[S--]=L;break}S--}}else!function(){for(var n=M;n<=S;n++){var i=e[n],r=t(i);if(r<A)n!==M&&(e[n]=e[M],e[M]=i),++M;else if(r>k)for(;;){var s=t(e[S]);if(!(s>k)){s<A?(e[n]=e[M],e[M++]=e[S],e[S--]=i):(e[n]=e[S],e[S--]=i);break}if(--S<n)break}}}();return e[i]=e[M-1],e[M-1]=w,e[r-1]=e[S+1],e[S+1]=C,n(e,i,M-1),n(e,S+2,r),T?e:(M<o&&S>h&&function(){for(var n,i;(n=t(e[M]))<=A&&n>=A;)++M;for(;(i=t(e[S]))<=k&&i>=k;)--S;for(var r=M;r<=S;r++){var s=e[r],a=t(s);if(a<=A&&a>=A)r!==M&&(e[r]=e[M],e[M]=s),M++;else if(a<=k&&a>=k)for(;;){if(!((i=t(e[S]))<=k&&i>=k)){i<A?(e[r]=e[M],e[M++]=e[S],e[S--]=s):(e[r]=e[S],e[S--]=s);break}if(--S<r)break}}}(),n(e,M,S+1))}return n}var a=32;e.exports=s(i),e.exports.by=s},{"./identity":10,"./insertionsort":11}],15:[function(t,e,n){e.exports={reduceIncrement:function(t){return t+1},reduceDecrement:function(t){return t-1},reduceAdd:function(t){return function(e,n){return e+ +t(n)}},reduceSubtract:function(t){return function(e,n){return e-t(n)}}}},{}],16:[function(t,e,n){e.exports=function(){return 0}},{}]},{},[1])(1)}));const Hh={CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},Bh=function(){const t={enableDebugLog:!1,warn:function(e){return console&&(console.warn?console.warn(e):console.log&&console.log(e)),t}},e={};return t.warnOnce=function(n){return e[n]||(e[n]=!0,Bh.warn(n)),t},t.debug=function(e){return t.enableDebugLog&&console&&(console.debug?console.debug(e):console.log&&console.log(e)),t},t.deprecate=function(e,n){let i=!1;return function(){return i||(t.warn(n),i=!0),e.apply(this,arguments)}},t.annotate=function(t,e){let n=!1;return function(){return n||(console.groupCollapsed(e),console.trace(),console.groupEnd(),n=!0),t.apply(this,arguments)}},t}();class Uh{constructor(){this._defaultColors=Uh._schemeCategory20c,this.dateFormat=Gs("%m/%d/%Y"),this._renderlet=null,this.disableTransitions=!1}defaultColors(t){return arguments.length?(this._defaultColors=t,this):(this._defaultColors===Uh._schemeCategory20c&&Bh.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),this._defaultColors)}}Uh._schemeCategory20c=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];const Yh=new Uh,Gh=function(){let t={};function e(e){return e||(e=Hh.DEFAULT_CHART_GROUP),t[e]||(t[e]=[]),e}return{has:function(e){for(let n in t)if(t[n].indexOf(e)>=0)return!0;return!1},register:function(n,i){i=e(i),t[i].push(n)},deregister:function(n,i){i=e(i);for(let e=0;e<t[i].length;e++)if(t[i][e].anchorName()===n.anchorName()){t[i].splice(e,1);break}},clear:function(e){e?delete t[e]:t={}},list:function(n){return n=e(n),t[n]}}}(),Ih=function(t,e){Gh.register(t,e)},Vh=function(t,e){Gh.deregister(t,e)},Xh=function(t){const e=Gh.list(t);for(let t=0;t<e.length;++t)e[t].render();null!==Yh._renderlet&&Yh._renderlet(t)},Wh=function(t){const e=Gh.list(t);for(let t=0;t<e.length;++t)e[t].redraw();null!==Yh._renderlet&&Yh._renderlet(t)},jh=function(t,e,n,i){if(Yh.disableTransitions||e<=0)return t;let r=t.transition(i);return(e>=0||void 0!==e)&&(r=r.duration(e)),(n>=0||void 0!==n)&&(r=r.delay(n)),r},qh=function(t,e,n,i){return t?function(t){return jh(t,e,n,i)}:function(t){return t}},Zh=function(t){return t instanceof Object&&t.__dcFlag__&&!0};class $h extends Error{}class Kh extends Error{}const Qh=function(t,e){return e?function(n,i){return e.call(n,n[t],i)}:function(e){return e[t]}},Jh={printSingleValue:function(t){let e=""+t;return t instanceof Date?e=Yh.dateFormat(t):"string"==typeof t?e=t:Jh.isFloat(t)?e=Jh.printSingleValue.fformat(t):Jh.isInteger(t)&&(e=Math.round(t)),e}};Jh.printSingleValue.fformat=Yr(".2f"),Jh._toTimeFunc=function(t){return{second:bs,minute:ws,hour:As,day:Cs,week:Ms,month:Ds,year:Es}[t]},Jh.add=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===n?new Date(t.getTime()+e):("function"!=typeof(n=n||Cs)&&(n=Jh._toTimeFunc(n)),n.offset(t,e));if("string"==typeof e){const n=+e/100;return t>0?t*(1+n):t*(1-n)}return t+e},Jh.subtract=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===n?new Date(t.getTime()-e):("function"!=typeof(n=n||Cs)&&(n=Jh._toTimeFunc(n)),n.offset(t,-e));if("string"==typeof e){const n=+e/100;return t<0?t*(1+n):t*(1-n)}return t-e},Jh.isNumber=function(t){return t===+t},Jh.isFloat=function(t){return t===+t&&t!==(0|t)},Jh.isInteger=function(t){return t===+t&&t===(0|t)},Jh.isNegligible=function(t){return!Jh.isNumber(t)||t<Hh.NEGLIGIBLE_NUMBER&&t>-Hh.NEGLIGIBLE_NUMBER},Jh.clamp=function(t,e,n){return t<e?e:t>n?n:t},Jh.constant=function(t){return function(){return t}};let tl=0;function el(t,e){for(let n=0;n<t.length;n++)if(t[n].key===e)return t[n]}Jh.uniqueId=function(){return++tl},Jh.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},Jh.appendOrSelect=function(t,e,n){n=n||e;let i=t.select(e);return i.empty()&&(i=t.append(n)),i},Jh.safeNumber=function(t){return Jh.isNumber(+t)?+t:0},Jh.arraysEqual=function(t,e){return!t&&!e||!(!t||!e)&&(t.length===e.length&&t.every((function(t,n){return t.valueOf()===e[n].valueOf()})))},Jh.allChildren=function(t){let e=[];if(e.push(t.path),console.log("currentNode",t),t.children)for(let n=0;n<t.children.length;n++)e=e.concat(Jh.allChildren(t.children[n]));return e},Jh.toHierarchy=function(t,e){const n={key:"root",children:[]};for(let i=0;i<t.length;i++){const r=t[i],s=r.key,a=e(r);let o=n;for(let t=0;t<s.length;t++){const e=s.slice(0,t+1),n=o.children,i=s[t];let h;t+1<s.length?(void 0===(h=el(n,i))&&(h={key:i,children:[],path:e},n.push(h)),o=h):(h={key:i,value:a,data:r,path:e},n.push(h))}}return n},Jh.getAncestors=function(t){const e=[];let n=t;for(;n.parent;)e.unshift(n.name),n=n.parent;return e},Jh.arraysIdentical=function(t,e){let n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0};const nl={current:null,trigger:function(t,e){e?(nl.current=t,setTimeout((function(){t===nl.current&&t()}),e)):t()}},il={filters:function(t){let e="";for(let n=0;n<t.length;++n)n>0&&(e+=", "),e+=il.filter(t[n]);return e},filter:function(t){let e="";return null!=t&&(t instanceof Array?t.length>=2?e="["+t.map((function(t){return Jh.printSingleValue(t)})).join(" -> ")+"]":t.length>=1&&(e=Jh.printSingleValue(t[0])):e=Jh.printSingleValue(t)),e}},rl=(t,e)=>(0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction(t=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.isFiltered&&i.isFiltered(t))return!0;if(i<=t&&i>=t)return!0}return!1}):t.filterExact(e[0]),e),sl=(t,e)=>null==e?t.length>0:t.some(t=>e<=t&&e>=t),al=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t},ol=(t,e)=>(t.push(e),t),hl=t=>[];class ll{constructor(){this.__dcFlag__=Jh.uniqueId(),this._dimension=void 0,this._group=void 0,this._anchor=void 0,this._root=void 0,this._svg=void 0,this._isChild=void 0,this._minWidth=200,this._widthCalc=this._defaultWidthCalc,this._minHeight=200,this._heightCalc=this._defaultHeightCalc,this._width=void 0,this._height=void 0,this._useViewBoxResizing=!1,this._keyAccessor=Qh("key"),this._valueAccessor=Qh("value"),this._label=Qh("key"),this._ordering=Qh("key"),this._renderLabel=!1,this._title=t=>this.keyAccessor()(t)+": "+this.valueAccessor()(t),this._renderTitle=!0,this._controlsUseVisibility=!1,this._transitionDuration=750,this._transitionDelay=0,this._filterPrinter=il.filters,this._mandatoryAttributesList=["dimension","group"],this._chartGroup=Hh.DEFAULT_CHART_GROUP,this._listeners=M("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),this._legend=void 0,this._commitHandler=void 0,this._data=this._defaultData,this._filters=[],this._filterHandler=rl,this._hasFilterHandler=sl,this._removeFilterHandler=al,this._addFilterHandler=ol,this._resetFilterHandler=hl}height(t){return arguments.length?(this._heightCalc=t?"function"==typeof t?t:Jh.constant(t):this._defaultHeightCalc,this._height=void 0,this):(Jh.isNumber(this._height)||(this._height=this._heightCalc(this._root.node())),this._height)}width(t){return arguments.length?(this._widthCalc=t?"function"==typeof t?t:Jh.constant(t):this._defaultWidthCalc,this._width=void 0,this):(Jh.isNumber(this._width)||(this._width=this._widthCalc(this._root.node())),this._width)}minWidth(t){return arguments.length?(this._minWidth=t,this):this._minWidth}minHeight(t){return arguments.length?(this._minHeight=t,this):this._minHeight}useViewBoxResizing(t){return arguments.length?(this._useViewBoxResizing=t,this):this._useViewBoxResizing}dimension(t){return arguments.length?(this._dimension=t,this.expireCache(),this):this._dimension}data(t){return arguments.length?(this._data="function"==typeof t?t:Jh.constant(t),this.expireCache(),this):this._data(this._group)}group(t,e){return arguments.length?(this._group=t,this._groupName=e,this.expireCache(),this):this._group}ordering(t){return arguments.length?(this._ordering=t,this.expireCache(),this):this._ordering}_computeOrderedGroups(t){return Array.from(t).sort((t,e)=>this._ordering(t)-this._ordering(e))}filterAll(){return this.filter(null)}select(t){return this._root.select(t)}selectAll(t){return this._root?this._root.selectAll(t):null}anchor(t,e){if(!arguments.length)return this._anchor;if(Zh(t))this._anchor=t.anchor(),this._anchor.children&&(this._anchor="#"+t.anchorName()),this._root=t.root(),this._isChild=!0;else{if(!t)throw new $h("parent must be defined");t.select&&t.classed?this._anchor=t.node():this._anchor=t,this._root=Yt(this._anchor),this._root.classed(Hh.CHART_CLASS,!0),Ih(this,e),this._isChild=!1}return this._chartGroup=e,this}anchorName(){const t=this.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+this.chartID()}root(t){return arguments.length?(this._root=t,this):this._root}svg(t){return arguments.length?(this._svg=t,this):this._svg}resetSvg(){return this.select("svg").remove(),this.generateSvg()}sizeSvg(){this._svg&&(this._useViewBoxResizing?this._svg.attr("viewBox")||this._svg.attr("viewBox","0 0 "+this.width()+" "+this.height()):this._svg.attr("width",this.width()).attr("height",this.height()))}generateSvg(){return this._svg=this.root().append("svg"),this.sizeSvg(),this._svg}filterPrinter(t){return arguments.length?(this._filterPrinter=t,this):this._filterPrinter}controlsUseVisibility(t){return arguments.length?(this._controlsUseVisibility=t,this):this._controlsUseVisibility}turnOnControls(){if(this._root){const t=this.controlsUseVisibility()?"visibility":"display";this.selectAll(".reset").style(t,null),this.selectAll(".filter").text(this._filterPrinter(this.filters())).style(t,null)}return this}turnOffControls(){if(this._root){const t=this.controlsUseVisibility()?"visibility":"display",e=this.controlsUseVisibility()?"hidden":"none";this.selectAll(".reset").style(t,e),this.selectAll(".filter").style(t,e).text(this.filter())}return this}transitionDuration(t){return arguments.length?(this._transitionDuration=t,this):this._transitionDuration}transitionDelay(t){return arguments.length?(this._transitionDelay=t,this):this._transitionDelay}_mandatoryAttributes(t){return arguments.length?(this._mandatoryAttributesList=t,this):this._mandatoryAttributesList}checkForMandatoryAttributes(t){if(!this[t]||!this[t]())throw new Kh("Mandatory attribute chart."+t+" is missing on chart[#"+this.anchorName()+"]")}render(){this._height=this._width=void 0,this._listeners.call("preRender",this,this),this._mandatoryAttributesList&&this._mandatoryAttributesList.forEach(t=>this.checkForMandatoryAttributes(t));const t=this._doRender();return this._legend&&this._legend.render(),this._activateRenderlets("postRender"),t}_activateRenderlets(t){this._listeners.call("pretransition",this,this),this.transitionDuration()>0&&this._svg?this._svg.transition().duration(this.transitionDuration()).delay(this.transitionDelay()).on("end",()=>{this._listeners.call("renderlet",this,this),t&&this._listeners.call(t,this,this)}):(this._listeners.call("renderlet",this,this),t&&this._listeners.call(t,this,this))}redraw(){this.sizeSvg(),this._listeners.call("preRedraw",this,this);const t=this._doRedraw();return this._legend&&this._legend.render(),this._activateRenderlets("postRedraw"),t}commitHandler(t){return arguments.length?(this._commitHandler=t,this):this._commitHandler}redrawGroup(){return this._commitHandler?this._commitHandler(!1,(t,e)=>{t?console.log(t):Wh(this.chartGroup())}):Wh(this.chartGroup()),this}renderGroup(){return this._commitHandler?this._commitHandler(!1,(t,e)=>{t?console.log(t):Xh(this.chartGroup())}):Xh(this.chartGroup()),this}_invokeFilteredListener(t){void 0!==t&&this._listeners.call("filtered",this,this,t)}_invokeZoomedListener(){this._listeners.call("zoomed",this,this)}hasFilterHandler(t){return arguments.length?(this._hasFilterHandler=t,this):this._hasFilterHandler}hasFilter(t){return this._hasFilterHandler(this._filters,t)}removeFilterHandler(t){return arguments.length?(this._removeFilterHandler=t,this):this._removeFilterHandler}addFilterHandler(t){return arguments.length?(this._addFilterHandler=t,this):this._addFilterHandler}resetFilterHandler(t){return arguments.length?(this._resetFilterHandler=t,this):this._resetFilterHandler}applyFilters(t){if(this.dimension()&&this.dimension().filter){const e=this._filterHandler(this.dimension(),t);e&&(t=e)}return t}replaceFilter(t){return this._filters=this._resetFilterHandler(this._filters),this.filter(t),this}filter(t){if(!arguments.length)return this._filters.length>0?this._filters[0]:null;let e=this._filters;return t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(t=>{e=this._hasFilterHandler(e,t)?this._removeFilterHandler(e,t):this._addFilterHandler(e,t)}):e=null===t?this._resetFilterHandler(e):this._hasFilterHandler(e,t)?this._removeFilterHandler(e,t):this._addFilterHandler(e,t),this._filters=this.applyFilters(e),this._invokeFilteredListener(t),null!==this._root&&this.hasFilter()?this.turnOnControls():this.turnOffControls(),this}filters(){return this._filters}highlightSelected(t){Yt(t).classed(Hh.SELECTED_CLASS,!0),Yt(t).classed(Hh.DESELECTED_CLASS,!1)}fadeDeselected(t){Yt(t).classed(Hh.SELECTED_CLASS,!1),Yt(t).classed(Hh.DESELECTED_CLASS,!0)}resetHighlight(t){Yt(t).classed(Hh.SELECTED_CLASS,!1),Yt(t).classed(Hh.DESELECTED_CLASS,!1)}onClick(t){const e=this.keyAccessor()(t);nl.trigger(()=>{this.filter(e),this.redrawGroup()})}filterHandler(t){return arguments.length?(this._filterHandler=t,this):this._filterHandler}_doRender(){return this}_doRedraw(){return this}legendables(){return[]}legendHighlight(){}legendReset(){}legendToggle(){}isLegendableHidden(){return!1}keyAccessor(t){return arguments.length?(this._keyAccessor=t,this):this._keyAccessor}valueAccessor(t){return arguments.length?(this._valueAccessor=t,this):this._valueAccessor}label(t,e){return arguments.length?(this._label=t,(void 0===e||e)&&(this._renderLabel=!0),this):this._label}renderLabel(t){return arguments.length?(this._renderLabel=t,this):this._renderLabel}title(t){return arguments.length?(this._title=t,this):this._title}renderTitle(t){return arguments.length?(this._renderTitle=t,this):this._renderTitle}chartGroup(t){return arguments.length?(this._isChild||Vh(this,this._chartGroup),this._chartGroup=t,this._isChild||Ih(this,this._chartGroup),this):this._chartGroup}expireCache(){return this}legend(t){return arguments.length?(this._legend=t,this._legend.parent(this),this):this._legend}chartID(){return this.__dcFlag__}options(t){const e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(let n in t)"function"==typeof this[n]?t[n]instanceof Array&&-1!==e.indexOf(n)?this[n].apply(this,t[n]):this[n].call(this,t[n]):Bh.debug("Not a valid option setter name: "+n);return this}on(t,e){return this._listeners.on(t,e),this}renderlet(t){return Bh.warnOnce('chart.renderlet has been deprecated. Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),this.on("renderlet."+Jh.uniqueId(),t),this}_defaultWidthCalc(t){const e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>this._minWidth?e:this._minWidth}_defaultHeightCalc(t){const e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>this._minHeight?e:this._minHeight}_defaultData(t){return t.all()}}const ul=t=>(class extends t{constructor(){super(),this._colors=es(Yh.defaultColors()),this._colorAccessor=t=>this.keyAccessor()(t),this._colorCalculator=void 0;{const t=this;t.getColor=function(e,n){return t._colorCalculator?t._colorCalculator.call(this,e,n):t._colors(t._colorAccessor.call(this,e,n))}}}calculateColorDomain(){const t=[l(this.data(),this.colorAccessor()),h(this.data(),this.colorAccessor())];return this._colors.domain(t),this}colors(t){return arguments.length?(t instanceof Array?this._colors=function t(){var e,i=0,r=1,s=1,a=[.5],o=[0,1];function h(t){return t<=t?o[n(a,t,0,s)]:e}function l(){var t=-1;for(a=new Array(s);++t<s;)a[t]=((t+1)*r-(t-s)*i)/(s+1);return h}return h.domain=function(t){return arguments.length?(i=+t[0],r=+t[1],l()):[i,r]},h.range=function(t){return arguments.length?(s=(o=Jr.call(t)).length-1,l()):o.slice()},h.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[i,a[0]]:e>=s?[a[s-1],r]:[a[e-1],a[e]]},h.unknown=function(t){return arguments.length?(e=t,h):h},h.thresholds=function(){return a.slice()},h.copy=function(){return t().domain([i,r]).range(o).unknown(e)},$r.apply(ds(h),arguments)}().range(t):this._colors="function"==typeof t?t:Jh.constant(t),this):this._colors}ordinalColors(t){return this.colors(es().range(t))}linearColors(t){return this.colors(_s().range(t).interpolate(An))}colorAccessor(t){return arguments.length?(this._colorAccessor=t,this):this._colorAccessor}colorDomain(t){return arguments.length?(this._colors.domain(t),this):this._colors.domain()}colorCalculator(t){return arguments.length?(this._colorCalculator=t,this):this._colorCalculator||this.getColor}}),cl=t=>(class extends t{constructor(){super(),this._cap=1/0,this._takeFront=!0,this._othersLabel="Others",this.ordering(t=>-t.value),this.data(t=>{if(this._cap===1/0)return this._computeOrderedGroups(t.all());{let e,n=t.all();if(n=this._computeOrderedGroups(n),this._cap)if(this._takeFront)e=n.slice(this._cap),n=n.slice(0,this._cap);else{const t=Math.max(0,n.length-this._cap);e=n.slice(0,t),n=n.slice(t)}return this._othersGrouper?this._othersGrouper(n,e):n}})}cappedKeyAccessor(t,e){return t.others?t.key:this.keyAccessor()(t,e)}cappedValueAccessor(t,e){return t.others?t.value:this.valueAccessor()(t,e)}_othersGrouper(t,e){const n=u(e,this.valueAccessor()),i=e.map(this.keyAccessor());return n>0?t.concat([{others:i,key:this.othersLabel(),value:n}]):t}cap(t){return arguments.length?(this._cap=t,this):this._cap}takeFront(t){return arguments.length?(this._takeFront=t,this):this._takeFront}othersLabel(t){return arguments.length?(this._othersLabel=t,this):this._othersLabel}othersGrouper(t){return arguments.length?(this._othersGrouper=t,this):this._othersGrouper}onClick(t){t.others&&this.filter([t.others]),super.onClick(t)}}),fl=.5;class dl extends(cl(ul(ll))){constructor(t,e){super(),this._sliceCssClass="pie-slice",this._labelCssClass="pie-label",this._sliceGroupCssClass="pie-slice-group",this._labelGroupCssClass="pie-label-group",this._emptyCssClass="empty-chart",this._emptyTitle="empty",this._radius=void 0,this._givenRadius=void 0,this._innerRadius=0,this._externalRadiusPadding=0,this._g=void 0,this._cx=void 0,this._cy=void 0,this._minAngleForLabel=fl,this._externalLabelRadius=void 0,this._drawPaths=!1,this.colorAccessor(t=>this.cappedKeyAccessor(t)),this.title(t=>this.cappedKeyAccessor(t)+": "+this.cappedValueAccessor(t)),this.label(t=>this.cappedKeyAccessor(t)),this.renderLabel(!0),this.transitionDuration(350),this.transitionDelay(0),this.anchor(t,e)}slicesCap(t){return this.cap(t)}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate("+this.cx()+","+this.cy()+")"),this._g.append("g").attr("class",this._sliceGroupCssClass),this._g.append("g").attr("class",this._labelGroupCssClass),this._drawChart(),this}_drawChart(){const t=l([this.width(),this.height()])/2;this._radius=this._givenRadius&&this._givenRadius<t?this._givenRadius:t;const e=this._buildArcs(),n=this._pieLayout();let i;if(u(this.data(),t=>this.cappedValueAccessor(t))?(i=n(this.data()),this._g.classed(this._emptyCssClass,!1)):(i=n([{key:this._emptyTitle,value:1,others:[this._emptyTitle]}]),this._g.classed(this._emptyCssClass,!0)),this._g){const t=this._g.select("g."+this._sliceGroupCssClass).selectAll("g."+this._sliceCssClass).data(i),n=this._g.select("g."+this._labelGroupCssClass).selectAll("text."+this._labelCssClass).data(i);this._removeElements(t,n),this._createElements(t,n,e,i),this._updateElements(i,e),this._highlightFilter(),jh(this._g,this.transitionDuration(),this.transitionDelay()).attr("transform","translate("+this.cx()+","+this.cy()+")")}}_createElements(t,e,n,i){const r=this._createSliceNodes(t);this._createSlicePath(r,n),this._createTitles(r),this._createLabels(e,i,n)}_createSliceNodes(t){return t.enter().append("g").attr("class",(t,e)=>this._sliceCssClass+" _"+e)}_createSlicePath(t,e){const n=t.append("path").attr("fill",(t,e)=>this._fill(t,e)).on("click",(t,e)=>this._onClick(t,e)).attr("d",(t,n)=>this._safeArc(t,n,e)),i=jh(n,this.transitionDuration(),this.transitionDelay());if(i.attrTween){const t=this;i.attrTween("d",(function(e){return t._tweenPie(e,this)}))}}_createTitles(t){this.renderTitle()&&t.append("title").text(t=>this.title()(t.data))}_applyLabelText(t){t.text(t=>{const e=t.data;return!this._sliceHasNoData(e)&&!this._sliceTooSmall(t)||this._isSelectedSlice(t)?this.label()(t.data):""})}_positionLabels(t,e){this._applyLabelText(t),jh(t,this.transitionDuration(),this.transitionDelay()).attr("transform",t=>this._labelPosition(t,e)).attr("text-anchor","middle")}_highlightSlice(t,e){this.select("g.pie-slice._"+t).classed("highlight",e)}_createLabels(t,e,n){if(this.renderLabel()){const i=t.enter().append("text").attr("class",(t,e)=>{let n=this._sliceCssClass+" "+this._labelCssClass+" _"+e;return this._externalLabelRadius&&(n+=" external"),n}).on("click",(t,e)=>this._onClick(t,e)).on("mouseover",(t,e)=>{this._highlightSlice(e,!0)}).on("mouseout",(t,e)=>{this._highlightSlice(e,!1)});this._positionLabels(i,n),this._externalLabelRadius&&this._drawPaths&&this._updateLabelPaths(e,n)}}_updateLabelPaths(t,e){let n=this._g.selectAll("polyline."+this._sliceCssClass).data(t);n.exit().remove(),n=n.enter().append("polyline").attr("class",(t,e)=>"pie-path _"+e+" "+this._sliceCssClass).on("click",(t,e)=>this._onClick(t,e)).on("mouseover",(t,e)=>{this._highlightSlice(e,!0)}).on("mouseout",(t,e)=>{this._highlightSlice(e,!1)}).merge(n);const i=Po().outerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).innerRadius(this._radius-this._externalRadiusPadding),r=jh(n,this.transitionDuration(),this.transitionDelay());r.attrTween?r.attrTween("points",(function(t){let n=this._current||t;const r=nn(n={startAngle:n.startAngle,endAngle:n.endAngle},t);return this._current=r(0),t=>{const n=r(t);return[e.centroid(n),i.centroid(n)]}})):r.attr("points",t=>[e.centroid(t),i.centroid(t)]),r.style("visibility",t=>t.endAngle-t.startAngle<1e-4?"hidden":"visible")}_updateElements(t,e){this._updateSlicePaths(t,e),this._updateLabels(t,e),this._updateTitles(t)}_updateSlicePaths(t,e){const n=this._g.selectAll("g."+this._sliceCssClass).data(t).select("path").attr("d",(t,n)=>this._safeArc(t,n,e)),i=jh(n,this.transitionDuration(),this.transitionDelay());if(i.attrTween){const t=this;i.attrTween("d",(function(e){return t._tweenPie(e,this)}))}i.attr("fill",(t,e)=>this._fill(t,e))}_updateLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll("text."+this._labelCssClass).data(t);this._positionLabels(n,e),this._externalLabelRadius&&this._drawPaths&&this._updateLabelPaths(t,e)}}_updateTitles(t){this.renderTitle()&&this._g.selectAll("g."+this._sliceCssClass).data(t).select("title").text(t=>this.title()(t.data))}_removeElements(t,e){t.exit().remove(),e.exit().remove()}_highlightFilter(){const t=this;this.hasFilter()?this.selectAll("g."+this._sliceCssClass).each((function(e){t._isSelectedSlice(e)?t.highlightSelected(this):t.fadeDeselected(this)})):this.selectAll("g."+this._sliceCssClass).each((function(){t.resetHighlight(this)}))}externalRadiusPadding(t){return arguments.length?(this._externalRadiusPadding=t,this):this._externalRadiusPadding}innerRadius(t){return arguments.length?(this._innerRadius=t,this):this._innerRadius}radius(t){return arguments.length?(this._givenRadius=t,this):this._givenRadius}cx(t){return arguments.length?(this._cx=t,this):this._cx||this.width()/2}cy(t){return arguments.length?(this._cy=t,this):this._cy||this.height()/2}_buildArcs(){return Po().outerRadius(this._radius-this._externalRadiusPadding).innerRadius(this._innerRadius)}_isSelectedSlice(t){return this.hasFilter(this.cappedKeyAccessor(t.data))}_doRedraw(){return this._drawChart(),this}minAngleForLabel(t){return arguments.length?(this._minAngleForLabel=t,this):this._minAngleForLabel}_pieLayout(){return function(){var t=Yo,e=Uo,n=null,i=po(0),r=po(Mo),s=po(0);function a(a){var o,h,l,u,c,f=a.length,d=0,_=new Array(f),p=new Array(f),g=+i.apply(this,arguments),y=Math.min(Mo,Math.max(-Mo,r.apply(this,arguments)-g)),m=Math.min(Math.abs(y)/f,s.apply(this,arguments)),v=m*(y<0?-1:1);for(o=0;o<f;++o)(c=p[_[o]=o]=+t(a[o],o,a))>0&&(d+=c);for(null!=e?_.sort((function(t,n){return e(p[t],p[n])})):null!=n&&_.sort((function(t,e){return n(a[t],a[e])})),o=0,l=d?(y-f*v)/d:0;o<f;++o,g=u)h=_[o],u=g+((c=p[h])>0?c*l:0)+v,p[h]={data:a[h],index:o,value:c,startAngle:g,endAngle:u,padAngle:m};return p}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:po(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:po(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:po(+t),a):r},a.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:po(+t),a):s},a}().sort(null).value(t=>this.cappedValueAccessor(t))}_sliceTooSmall(t){const e=t.endAngle-t.startAngle;return isNaN(e)||e<this._minAngleForLabel}_sliceHasNoData(t){return 0===this.cappedValueAccessor(t)}_isOffCanvas(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}_fill(t,e){return this.getColor(t.data,e)}_onClick(t,e){this._g.attr("class")!==this._emptyCssClass&&this.onClick(t.data,e)}_safeArc(t,e,n){let i=n(t,e);return i.indexOf("NaN")>=0&&(i="M0,0"),i}emptyTitle(t){return 0===arguments.length?this._emptyTitle:(this._emptyTitle=t,this)}externalLabels(t){return 0===arguments.length?this._externalLabelRadius:(this._externalLabelRadius=t||void 0,this)}drawPaths(t){return 0===arguments.length?this._drawPaths:(this._drawPaths=t,this)}_labelPosition(t,e){let n;return n=this._externalLabelRadius?Po().outerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).innerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).centroid(t):e.centroid(t),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}legendables(){return this.data().map((t,e)=>{const n={name:t.key,data:t.value,others:t.others,chart:this};return n.color=this.getColor(t,e),n})}legendHighlight(t){this._highlightSliceFromLegendable(t,!0)}legendReset(t){this._highlightSliceFromLegendable(t,!1)}legendToggle(t){this.onClick({key:t.name,others:t.others})}_highlightSliceFromLegendable(t,e){this.selectAll("g.pie-slice").each((function(n){t.name===n.data.key&&Yt(this).classed("highlight",e)}))}_tweenPie(t,e){t.innerRadius=this._innerRadius;let n=e._current;const i=nn(n=this._isOffCanvas(n)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle},t);return e._current=i(0),t=>this._safeArc(i(t),0,this._buildArcs())}}const _l={RangedFilter:function(t,e){const n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},TwoDimensionalFilter:function(t){if(null===t)return null;const e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},RangedTwoDimensionalFilter:function(t){if(null===t)return null;const e=t;let n;return n=e[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],e.isFiltered=function(t){let e,i;return t instanceof Array?(e=t[0],i=t[1]):(e=t,i=n[0][1]),e>=n[0][0]&&e<n[1][0]&&i>=n[0][1]&&i<n[1][1]},e.filterType="RangedTwoDimensionalFilter",e},HierarchyFilter:function(t){if(null===t)return null;const e=t.slice(0);return e.isFiltered=function(t){if(!(e.length&&t&&t.length&&t.length>=e.length))return!1;for(let n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},e}},pl={integers:function(t,e){return Math.abs(e-t)},ordinal:function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},fp:{}};pl.fp.precision=function(t){const e=function(t,n){const i=Math.abs((n-t)/e.resolution);return Jh.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return e.resolution=t,e};class gl extends ll{constructor(){super(),this._margin={top:10,right:50,bottom:30,left:30}}margins(t){return arguments.length?(this._margin=t,this):this._margin}effectiveWidth(){return this.width()-this.margins().left-this.margins().right}effectiveHeight(){return this.height()-this.margins().top-this.margins().bottom}}const yl="grid-line",ml="horizontal",vl="vertical",xl="y-axis-label",bl="x-axis-label",wl="custom-brush-handle",Al=12;class Cl extends(ul(gl)){constructor(){super(),this.colors(es(fo)),this._mandatoryAttributes().push("x"),this._parent=void 0,this._g=void 0,this._chartBodyG=void 0,this._x=void 0,this._origX=void 0,this._xOriginalDomain=void 0,this._xAxis=C(),this._xUnits=pl.integers,this._xAxisPadding=0,this._xAxisPaddingUnit=Cs,this._xElasticity=!1,this._xAxisLabel=void 0,this._xAxisLabelPadding=0,this._lastXDomain=void 0,this._y=void 0,this._yAxis=null,this._yAxisPadding=0,this._yElasticity=!1,this._yAxisLabel=void 0,this._yAxisLabelPadding=0,this._brush=ji(),this._gBrush=void 0,this._brushOn=!0,this._parentBrushOn=!1,this._round=void 0,this._renderHorizontalGridLine=!1,this._renderVerticalGridLine=!1,this._resizing=!1,this._unitCount=void 0,this._zoomScale=[1,1/0],this._zoomOutRestrict=!0,this._zoom=Ph().on("zoom",()=>this._onZoom()),this._nullZoom=Ph().on("zoom",null),this._hasBeenMouseZoomable=!1,this._rangeChart=void 0,this._focusChart=void 0,this._mouseZoomable=!1,this._clipPadding=0,this._fOuterRangeBandPadding=.5,this._fRangeBandPadding=0,this._useRightYAxis=!1}rescale(){return this._unitCount=void 0,this._resizing=!0,this}resizing(t){return arguments.length?(this._resizing=t,this):this._resizing}rangeChart(t){return arguments.length?(this._rangeChart=t,this._rangeChart.focusChart(this),this):this._rangeChart}zoomScale(t){return arguments.length?(this._zoomScale=t,this):this._zoomScale}zoomOutRestrict(t){return arguments.length?(this._zoomOutRestrict=t,this):this._zoomOutRestrict}_generateG(t){this._parent=void 0===t?this.svg():t;const e=window.location.href.split("#")[0];return this._g=this._parent.append("g"),this._chartBodyG=this._g.append("g").attr("class","chart-body").attr("transform","translate("+this.margins().left+", "+this.margins().top+")").attr("clip-path","url("+e+"#"+this._getClipPathId()+")"),this._g}g(t){return arguments.length?(this._g=t,this):this._g}mouseZoomable(t){return arguments.length?(this._mouseZoomable=t,this):this._mouseZoomable}chartBodyG(t){return arguments.length?(this._chartBodyG=t,this):this._chartBodyG}x(t){return arguments.length?(this._x=t,this._xOriginalDomain=this._x.domain(),this.rescale(),this):this._x}xOriginalDomain(){return this._xOriginalDomain}xUnits(t){return arguments.length?(this._xUnits=t,this):this._xUnits}xAxis(t){return arguments.length?(this._xAxis=t,this):this._xAxis}elasticX(t){return arguments.length?(this._xElasticity=t,this):this._xElasticity}xAxisPadding(t){return arguments.length?(this._xAxisPadding=t,this):this._xAxisPadding}xAxisPaddingUnit(t){return arguments.length?(this._xAxisPaddingUnit=t,this):this._xAxisPaddingUnit}xUnitCount(){return void 0===this._unitCount&&(this.isOrdinal()?this._unitCount=this.x().domain().length:(this._unitCount=this.xUnits()(this.x().domain()[0],this.x().domain()[1]),this._unitCount instanceof Array&&(this._unitCount=this._unitCount.length))),this._unitCount}useRightYAxis(t){return arguments.length?(this._useRightYAxis!==t&&this._yAxis&&Bh.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),this._useRightYAxis=t,this):this._useRightYAxis}isOrdinal(){return this.xUnits()===pl.ordinal}_useOuterPadding(){return!0}_ordinalXDomain(){return this._computeOrderedGroups(this.data()).map(this.keyAccessor())}_prepareXAxis(t,e){this.isOrdinal()?(this._x.bandwidth||(Bh.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),this._x=ns().domain(this._x.domain())),(this.elasticX()||0===this._x.domain().length)&&this._x.domain(this._ordinalXDomain())):this.elasticX()&&this._x.domain([this.xAxisMin(),this.xAxisMax()]);const n=this._x.domain();!e&&Jh.arraysEqual(this._lastXDomain,n)||this.rescale(),this._lastXDomain=n,this.isOrdinal()?this._x.range([0,this.xAxisLength()]).paddingInner(this._fRangeBandPadding).paddingOuter(this._useOuterPadding()?this._fOuterRangeBandPadding:0):this._x.range([0,this.xAxisLength()]),this._xAxis=this._xAxis.scale(this.x()),this._renderVerticalGridLines(t)}renderXAxis(t){let e=t.select("g.x");e.empty()&&(e=t.append("g").attr("class","axis x").attr("transform","translate("+this.margins().left+","+this._xAxisY()+")"));let n=t.select("text."+bl);n.empty()&&this.xAxisLabel()&&(n=t.append("text").attr("class",bl).attr("transform","translate("+(this.margins().left+this.xAxisLength()/2)+","+(this.height()-this._xAxisLabelPadding)+")").attr("text-anchor","middle")),this.xAxisLabel()&&n.text()!==this.xAxisLabel()&&n.text(this.xAxisLabel()),jh(e,this.transitionDuration(),this.transitionDelay()).attr("transform","translate("+this.margins().left+","+this._xAxisY()+")").call(this._xAxis),jh(n,this.transitionDuration(),this.transitionDelay()).attr("transform","translate("+(this.margins().left+this.xAxisLength()/2)+","+(this.height()-this._xAxisLabelPadding)+")")}_renderVerticalGridLines(t){let e=t.select("g."+vl);if(this._renderVerticalGridLine){e.empty()&&(e=t.insert("g",":first-child").attr("class",yl+" "+vl).attr("transform","translate("+this.margins().left+","+this.margins().top+")"));const n=this._xAxis.tickValues()?this._xAxis.tickValues():"function"==typeof this._x.ticks?this._x.ticks.apply(this._x,this._xAxis.tickArguments()):this._x.domain(),i=e.selectAll("line").data(n),r=i.enter().append("line").attr("x1",t=>this._x(t)).attr("y1",this._xAxisY()-this.margins().top).attr("x2",t=>this._x(t)).attr("y2",0).attr("opacity",0);jh(r,this.transitionDuration(),this.transitionDelay()).attr("opacity",.5),jh(i,this.transitionDuration(),this.transitionDelay()).attr("x1",t=>this._x(t)).attr("y1",this._xAxisY()-this.margins().top).attr("x2",t=>this._x(t)).attr("y2",0),i.exit().remove()}else e.selectAll("line").remove()}_xAxisY(){return this.height()-this.margins().bottom}xAxisLength(){return this.effectiveWidth()}xAxisLabel(t,e){return arguments.length?(this._xAxisLabel=t,this.margins().bottom-=this._xAxisLabelPadding,this._xAxisLabelPadding=void 0===e?Al:e,this.margins().bottom+=this._xAxisLabelPadding,this):this._xAxisLabel}_createYAxis(){return this._useRightYAxis?A(_,t):function(t){return A(g,t)}();var t}_prepareYAxis(t){if(void 0===this._y||this.elasticY()){void 0===this._y&&(this._y=_s());const t=this.yAxisMin()||0,e=this.yAxisMax()||0;this._y.domain([t,e]).rangeRound([this.yAxisHeight(),0])}this._y.range([this.yAxisHeight(),0]),this._yAxis||(this._yAxis=this._createYAxis()),this._yAxis.scale(this._y),this._renderHorizontalGridLinesForAxis(t,this._y,this._yAxis)}renderYAxisLabel(t,e,n,i){i=i||this._yAxisLabelPadding;let r=this.g().select("text."+xl+"."+t+"-label");const s=this.margins().top+this.yAxisHeight()/2;r.empty()&&e&&(r=this.g().append("text").attr("transform","translate("+i+","+s+"),rotate("+n+")").attr("class",xl+" "+t+"-label").attr("text-anchor","middle").text(e)),e&&r.text()!==e&&r.text(e),jh(r,this.transitionDuration(),this.transitionDelay()).attr("transform","translate("+i+","+s+"),rotate("+n+")")}renderYAxisAt(t,e,n){let i=this.g().select("g."+t);i.empty()&&(i=this.g().append("g").attr("class","axis "+t).attr("transform","translate("+n+","+this.margins().top+")")),jh(i,this.transitionDuration(),this.transitionDelay()).attr("transform","translate("+n+","+this.margins().top+")").call(e)}renderYAxis(){const t=this._useRightYAxis?this.width()-this.margins().right:this._yAxisX();this.renderYAxisAt("y",this._yAxis,t);const e=this._useRightYAxis?this.width()-this._yAxisLabelPadding:this._yAxisLabelPadding,n=this._useRightYAxis?90:-90;this.renderYAxisLabel("y",this.yAxisLabel(),n,e)}_renderHorizontalGridLinesForAxis(t,e,n){let i=t.select("g."+ml);if(this._renderHorizontalGridLine){const r=n.tickValues()?n.tickValues():e.ticks?e.ticks.apply(e,n.tickArguments()):e.domain();i.empty()&&(i=t.insert("g",":first-child").attr("class",yl+" "+ml).attr("transform","translate("+this.margins().left+","+this.margins().top+")"));const s=i.selectAll("line").data(r),a=s.enter().append("line").attr("x1",1).attr("y1",t=>e(t)).attr("x2",this.xAxisLength()).attr("y2",t=>e(t)).attr("opacity",0);jh(a,this.transitionDuration(),this.transitionDelay()).attr("opacity",.5),jh(s,this.transitionDuration(),this.transitionDelay()).attr("x1",1).attr("y1",t=>e(t)).attr("x2",this.xAxisLength()).attr("y2",t=>e(t)),s.exit().remove()}else i.selectAll("line").remove()}_yAxisX(){return this.useRightYAxis()?this.width()-this.margins().right:this.margins().left}yAxisLabel(t,e){return arguments.length?(this._yAxisLabel=t,this.margins().left-=this._yAxisLabelPadding,this._yAxisLabelPadding=void 0===e?Al:e,this.margins().left+=this._yAxisLabelPadding,this):this._yAxisLabel}y(t){return arguments.length?(this._y=t,this.rescale(),this):this._y}yAxis(t){return arguments.length?(this._yAxis=t,this):(this._yAxis||(this._yAxis=this._createYAxis()),this._yAxis)}elasticY(t){return arguments.length?(this._yElasticity=t,this):this._yElasticity}renderHorizontalGridLines(t){return arguments.length?(this._renderHorizontalGridLine=t,this):this._renderHorizontalGridLine}renderVerticalGridLines(t){return arguments.length?(this._renderVerticalGridLine=t,this):this._renderVerticalGridLine}xAxisMin(){const t=l(this.data(),t=>this.keyAccessor()(t));return Jh.subtract(t,this._xAxisPadding,this._xAxisPaddingUnit)}xAxisMax(){const t=h(this.data(),t=>this.keyAccessor()(t));return Jh.add(t,this._xAxisPadding,this._xAxisPaddingUnit)}yAxisMin(){const t=l(this.data(),t=>this.valueAccessor()(t));return Jh.subtract(t,this._yAxisPadding)}yAxisMax(){const t=h(this.data(),t=>this.valueAccessor()(t));return Jh.add(t,this._yAxisPadding)}yAxisPadding(t){return arguments.length?(this._yAxisPadding=t,this):this._yAxisPadding}yAxisHeight(){return this.effectiveHeight()}round(t){return arguments.length?(this._round=t,this):this._round}_rangeBandPadding(t){return arguments.length?(this._fRangeBandPadding=t,this):this._fRangeBandPadding}_outerRangeBandPadding(t){return arguments.length?(this._fOuterRangeBandPadding=t,this):this._fOuterRangeBandPadding}filter(t){return arguments.length?(super.filter(t),this.redrawBrush(t,!1),this):super.filter()}brush(t){return arguments.length?(this._brush=t,this):this._brush}renderBrush(t,e){this._brushOn&&(this._brush.on("start brush end",()=>this._brushing()),this._gBrush=t.append("g").attr("class","brush").attr("transform","translate("+this.margins().left+","+this.margins().top+")"),this.setBrushExtents(),this.createBrushHandlePaths(this._gBrush,e),this.redrawBrush(this.filter(),e))}createBrushHandlePaths(t){let e=t.selectAll("path."+wl).data([{type:"w"},{type:"e"}]);(e=e.enter().append("path").attr("class",wl).merge(e)).attr("d",t=>this.resizeHandlePath(t))}extendBrush(t){return t&&this.round()&&(t[0]=this.round()(t[0]),t[1]=this.round()(t[1])),t}brushIsEmpty(t){return!t||t[1]<=t[0]}_brushing(){if(!Dt.sourceEvent)return;if(Dt.sourceEvent.type&&-1!==["start","brush","end"].indexOf(Dt.sourceEvent.type))return;let t=Dt.selection;t&&(t=t.map(this.x().invert)),t=this.extendBrush(t),this.redrawBrush(t,!1);const e=this.brushIsEmpty(t)?null:_l.RangedFilter(t[0],t[1]);nl.trigger(()=>{this.applyBrushSelection(e)},Hh.EVENT_DELAY)}applyBrushSelection(t){this.replaceFilter(t),this.redrawGroup()}setBrushExtents(t){this._brush.extent([[0,0],[this.effectiveWidth(),this.effectiveHeight()]]),this._gBrush.call(this._brush)}redrawBrush(t,e){if(this._brushOn&&this._gBrush)if(this._resizing&&this.setBrushExtents(e),t){const n=[this._x(t[0]),this._x(t[1])],i=qh(e,this.transitionDuration(),this.transitionDelay())(this._gBrush);i.call(this._brush.move,n),i.selectAll("path."+wl).attr("display",null).attr("transform",(e,n)=>"translate("+this._x(t[n])+", 0)").attr("d",t=>this.resizeHandlePath(t))}else this._gBrush.call(this._brush.move,null),this._gBrush.selectAll("path."+wl).attr("display","none");this.fadeDeselectedArea(t)}fadeDeselectedArea(t){}resizeHandlePath(t){const e=+("e"===(t=t.type)),n=e?1:-1,i=this.effectiveHeight()/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}_getClipPathId(){return this.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}clipPadding(t){return arguments.length?(this._clipPadding=t,this):this._clipPadding}_generateClipPath(){const t=Jh.appendOrSelect(this._parent,"defs"),e=this._getClipPathId(),n=Jh.appendOrSelect(t,"#"+e,"clipPath").attr("id",e),i=2*this._clipPadding;Jh.appendOrSelect(n,"rect").attr("width",this.xAxisLength()+i).attr("height",this.yAxisHeight()+i).attr("transform","translate(-"+this._clipPadding+", -"+this._clipPadding+")")}_preprocessData(){}_doRender(){return this.resetSvg(),this._preprocessData(),this._generateG(),this._generateClipPath(),this._drawChart(!0),this._configureMouseZoom(),this}_doRedraw(){return this._preprocessData(),this._drawChart(!1),this._generateClipPath(),this}_drawChart(t){this.isOrdinal()&&(this._brushOn=!1),this._prepareXAxis(this.g(),t),this._prepareYAxis(this.g()),this.plotData(),(this.elasticX()||this._resizing||t)&&this.renderXAxis(this.g()),(this.elasticY()||this._resizing||t)&&this.renderYAxis(this.g()),t?this.renderBrush(this.g(),!1):this.redrawBrush(this.filter(),this._resizing),this.fadeDeselectedArea(this.filter()),this.resizing(!1)}_configureMouseZoom(){this._origX=this._x.copy(),this._mouseZoomable?this._enableMouseZoom():this._hasBeenMouseZoomable&&this._disableMouseZoom()}_enableMouseZoom(){this._hasBeenMouseZoomable=!0;const t=[[0,0],[this.effectiveWidth(),this.effectiveHeight()]];if(this._zoom.scaleExtent(this._zoomScale).extent(t).duration(this.transitionDuration()),this._zoomOutRestrict){const e=Math.max(this._zoomScale[0],1);this._zoom.translateExtent(t).scaleExtent([e,this._zoomScale[1]])}this.root().call(this._zoom),this._updateD3zoomTransform()}_disableMouseZoom(){this.root().call(this._nullZoom)}_zoomHandler(t,e){let n;this._hasRangeSelected(t)?(this.x().domain(t),n=_l.RangedFilter(t[0],t[1])):(this.x().domain(this._xOriginalDomain),n=null),this.replaceFilter(n),this.rescale(),this.redraw(),e||(this._rangeChart&&!Jh.arraysEqual(this.filter(),this._rangeChart.filter())&&nl.trigger(()=>{this._rangeChart.replaceFilter(n),this._rangeChart.redraw()}),this._invokeZoomedListener(),nl.trigger(()=>{this.redrawGroup()},Hh.EVENT_DELAY))}_domainToZoomTransform(t,e,n){const i=(e[1]-e[0])/(t[1]-t[0]),r=-1*n(t[0]);return kh.scale(i).translate(r,0)}_updateD3zoomTransform(){this._zoom&&this._zoom.transform(this.root(),this._domainToZoomTransform(this.x().domain(),this._xOriginalDomain,this._origX))}_onZoom(){if(!Dt.sourceEvent)return;if(Dt.sourceEvent.type&&-1!==["start","zoom","end"].indexOf(Dt.sourceEvent.type))return;const t=Dt.transform.rescaleX(this._origX).domain();this.focus(t,!1)}_checkExtents(t,e){return t&&2===t.length&&e&&2===e.length?((t[0]>e[1]||t[1]<e[0])&&console.warn("Could not intersect extents, will reset"),[t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1]]):t}focus(t,e){this._zoomOutRestrict&&(t=this._checkExtents(t,this._xOriginalDomain),this._rangeChart&&(t=this._checkExtents(t,this._rangeChart.x().domain()))),this._zoomHandler(t,e),this._updateD3zoomTransform()}refocused(){return!Jh.arraysEqual(this.x().domain(),this._xOriginalDomain)}focusChart(t){return arguments.length?(this._focusChart=t,this.on("filtered.dcjs-range-chart",t=>{t.filter()?Jh.arraysEqual(t.filter(),this._focusChart.filter())||nl.trigger(()=>{this._focusChart.focus(t.filter(),!0)}):nl.trigger(()=>{this._focusChart.x().domain(this._focusChart.xOriginalDomain(),!0)})}),this):this._focusChart}brushOn(t){return arguments.length?(this._brushOn=t,this):this._brushOn}parentBrushOn(t){return arguments.length?(this._parentBrushOn=t,this):this._parentBrushOn}gBrush(){return this._gBrush}_hasRangeSelected(t){return t instanceof Array&&t.length>1}}class kl extends Cl{constructor(){super(),this._stackLayout=function(){var t=po([]),e=xh,n=vh,i=bh;function r(r){var s,a,o=t.apply(this,arguments),h=r.length,l=o.length,u=new Array(l);for(s=0;s<l;++s){for(var c,f=o[s],d=u[s]=new Array(h),_=0;_<h;++_)d[_]=c=[0,+i(r[_],f,_,r)],c.data=r[_];d.key=f}for(s=0,a=e(u);s<l;++s)u[a[s]].index=s;return n(u,a),u}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:po(Go.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:po(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?xh:"function"==typeof t?t:po(Go.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?vh:t,r):n},r}(),this._stack=[],this._titles={},this._hidableStacks=!1,this._evadeDomainFilter=!1,this.data(()=>{const t=this._stack.filter(this._visibility);if(!t.length)return[];t.forEach((t,e)=>this._prepareValues(t,e));const e=t[0].values.map((e,n)=>{const i={x:e.x};return t.forEach(t=>{i[t.name]=t.values[n].y}),i}),n=t.map(t=>t.name);return this.stackLayout().keys(n)(e).forEach((e,n)=>{e.forEach((e,i)=>{t[n].values[i].y0=e[0],t[n].values[i].y1=e[1]})}),t}),this.colorAccessor((function(t){return this.layer||this.name||t.name||t.layer}))}_prepareValues(t,e){const n=t.accessor||this.valueAccessor();t.name=String(t.name||e);const i=t.group.all().map((e,i)=>({x:this.keyAccessor()(e,i),y:t.hidden?null:n(e,i),data:e,layer:t.name,hidden:t.hidden}));t.domainValues=i.filter(t=>this._domainFilter()(t)),t.values=this.evadeDomainFilter()?i:t.domainValues}_domainFilter(){if(!this.x())return Jh.constant(!0);const t=this.x().domain();return this.isOrdinal()?()=>!0:this.elasticX()?()=>!0:e=>e.x>=t[0]&&e.x<=t[t.length-1]}stack(t,e,n){if(!arguments.length)return this._stack;arguments.length<=2&&(n=e);const i={group:t};return"string"==typeof e&&(i.name=e),"function"==typeof n&&(i.accessor=n),this._stack.push(i),this}group(t,e,n){return arguments.length?(this._stack=[],this._titles={},this.stack(t,e),n&&this.valueAccessor(n),super.group(t,e)):super.group()}hidableStacks(t){return arguments.length?(this._hidableStacks=t,this):this._hidableStacks}_findLayerByName(t){const e=this._stack.map(Qh("name")).indexOf(t);return this._stack[e]}hideStack(t){const e=this._findLayerByName(t);return e&&(e.hidden=!0),this}showStack(t){const e=this._findLayerByName(t);return e&&(e.hidden=!1),this}getValueAccessorByIndex(t){return this._stack[t].accessor||this.valueAccessor()}yAxisMin(){const t=l(this._flattenStack(),t=>t.y<0?t.y+t.y0:t.y0);return Jh.subtract(t,this.yAxisPadding())}yAxisMax(){const t=h(this._flattenStack(),t=>t.y>0?t.y+t.y0:t.y0);return Jh.add(t,this.yAxisPadding())}_flattenStack(){const t=this.data().map(t=>t.domainValues);return[].concat(...t)}xAxisMin(){const t=l(this._flattenStack(),Qh("x"));return Jh.subtract(t,this.xAxisPadding(),this.xAxisPaddingUnit())}xAxisMax(){const t=h(this._flattenStack(),Qh("x"));return Jh.add(t,this.xAxisPadding(),this.xAxisPaddingUnit())}title(t,e){return t?"function"==typeof t?super.title(t):t===this._groupName&&"function"==typeof e?super.title(e):"function"!=typeof e?this._titles[t]||super.title():(this._titles[t]=e,this):super.title()}stackLayout(t){return arguments.length?(this._stackLayout=t,this):this._stackLayout}evadeDomainFilter(t){return arguments.length?(this._evadeDomainFilter=t,this):this._evadeDomainFilter}_visibility(t){return!t.hidden}_ordinalXDomain(){const t=this._flattenStack().map(Qh("data"));return this._computeOrderedGroups(t).map(this.keyAccessor())}legendables(){return this._stack.map((t,e)=>({chart:this,name:t.name,hidden:t.hidden||!1,color:this.getColor.call(t,t.values,e)}))}isLegendableHidden(t){const e=this._findLayerByName(t.name);return!!e&&e.hidden}legendToggle(t){this._hidableStacks&&(this.isLegendableHidden(t)?this.showStack(t.name):this.hideStack(t.name),this.renderGroup())}}const Ml=1,Sl=2,Tl=3;class Dl extends kl{constructor(t,e){super(),this._gap=Sl,this._centerBar=!1,this._alwaysUseRounding=!1,this._barWidth=void 0,this.label(t=>Jh.printSingleValue(t.y0+t.y),!1),this.anchor(t,e)}outerPadding(t){return arguments.length?this._outerRangeBandPadding(t):this._outerRangeBandPadding()}rescale(){return super.rescale(),this._barWidth=void 0,this}render(){return this.round()&&this._centerBar&&!this._alwaysUseRounding&&Bh.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),super.render()}plotData(){let t=this.chartBodyG().selectAll("g.stack").data(this.data());this._calculateBarWidth();const e=(t=t.enter().append("g").attr("class",(t,e)=>"stack _"+e).merge(t)).size()-1;{const n=this;t.each((function(t,i){const r=Yt(this);n._renderBars(r,i,t),n.renderLabel()&&e===i&&n._renderLabels(r,i,t)}))}}_barHeight(t){return Jh.safeNumber(Math.abs(this.y()(t.y+t.y0)-this.y()(t.y0)))}_labelXPos(t){let e=this.x()(t.x);return this._centerBar||(e+=this._barWidth/2),this.isOrdinal()&&void 0!==this._gap&&(e+=this._gap/2),Jh.safeNumber(e)}_labelYPos(t){let e=this.y()(t.y+t.y0);return t.y<0&&(e-=this._barHeight(t)),Jh.safeNumber(e-Tl)}_renderLabels(t,e,n){const i=t.selectAll("text.barLabel").data(n.values,Qh("x")),r=i.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",t=>this._labelXPos(t)).attr("y",t=>this._labelYPos(t)).merge(i);this.isOrdinal()&&(r.on("click",t=>this.onClick(t)),r.attr("cursor","pointer")),jh(r,this.transitionDuration(),this.transitionDelay()).attr("x",t=>this._labelXPos(t)).attr("y",t=>this._labelYPos(t)).text(t=>this.label()(t)),jh(i.exit(),this.transitionDuration(),this.transitionDelay()).attr("height",0).remove()}_barXPos(t){let e=this.x()(t.x);return this._centerBar&&(e-=this._barWidth/2),this.isOrdinal()&&void 0!==this._gap&&(e+=this._gap/2),Jh.safeNumber(e)}_renderBars(t,e,n){const i=t.selectAll("rect.bar").data(n.values,Qh("x")),r=i.enter().append("rect").attr("class","bar").attr("fill",Qh("data",this.getColor)).attr("x",t=>this._barXPos(t)).attr("y",this.yAxisHeight()).attr("height",0),s=r.merge(i);this.renderTitle()&&r.append("title").text(Qh("data",this.title(n.name))),this.isOrdinal()&&s.on("click",t=>this.onClick(t)),jh(s,this.transitionDuration(),this.transitionDelay()).attr("x",t=>this._barXPos(t)).attr("y",t=>{let e=this.y()(t.y+t.y0);return t.y<0&&(e-=this._barHeight(t)),Jh.safeNumber(e)}).attr("width",this._barWidth).attr("height",t=>this._barHeight(t)).attr("fill",Qh("data",this.getColor)).select("title").text(Qh("data",this.title(n.name))),jh(i.exit(),this.transitionDuration(),this.transitionDelay()).attr("x",t=>this.x()(t.x)).attr("width",.9*this._barWidth).remove()}_calculateBarWidth(){if(void 0===this._barWidth){const t=this.xUnitCount();this.isOrdinal()&&void 0===this._gap?this._barWidth=Math.floor(this.x().bandwidth()):this._gap?this._barWidth=Math.floor((this.xAxisLength()-(t-1)*this._gap)/t):this._barWidth=Math.floor(this.xAxisLength()/(1+this.barPadding())/t),(this._barWidth===1/0||isNaN(this._barWidth)||this._barWidth<Ml)&&(this._barWidth=Ml)}}fadeDeselectedArea(t){const e=this.chartBodyG().selectAll("rect.bar");if(this.isOrdinal())this.hasFilter()?(e.classed(Hh.SELECTED_CLASS,t=>this.hasFilter(t.x)),e.classed(Hh.DESELECTED_CLASS,t=>!this.hasFilter(t.x))):(e.classed(Hh.SELECTED_CLASS,!1),e.classed(Hh.DESELECTED_CLASS,!1));else if(this.brushOn()||this.parentBrushOn())if(this.brushIsEmpty(t))e.classed(Hh.DESELECTED_CLASS,!1);else{const n=t[0],i=t[1];e.classed(Hh.DESELECTED_CLASS,t=>t.x<n||t.x>=i)}}centerBar(t){return arguments.length?(this._centerBar=t,this):this._centerBar}onClick(t){super.onClick(t.data)}barPadding(t){return arguments.length?(this._rangeBandPadding(t),this._gap=void 0,this):this._rangeBandPadding()}_useOuterPadding(){return void 0===this._gap}gap(t){return arguments.length?(this._gap=t,this):this._gap}extendBrush(t){return t&&this.round()&&(!this._centerBar||this._alwaysUseRounding)&&(t[0]=this.round()(t[0]),t[1]=this.round()(t[1])),t}alwaysUseRounding(t){return arguments.length?(this._alwaysUseRounding=t,this):this._alwaysUseRounding}legendHighlight(t){const e=(t,e)=>(function(){const n=Yt(this).attr("fill")===t;return e?!n:n});this.isLegendableHidden(t)||this.g().selectAll("rect.bar").classed("highlight",e(t.color)).classed("fadeout",e(t.color,!0))}legendReset(){this.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)}xAxisMax(){let t=super.xAxisMax();if("resolution"in this.xUnits()){t+=this.xUnits().resolution}return t}}class Ll extends(cl(ul(gl))){constructor(t,e){super(),this._g=void 0,this._labelOffsetX=10,this._labelOffsetY=15,this._hasLabelOffsetY=!1,this._dyOffset="0.35em",this._titleLabelOffsetX=2,this._gap=5,this._fixedBarHeight=!1,this._rowCssClass="row",this._titleRowCssClass="titlerow",this._renderTitleLabel=!1,this._x=void 0,this._elasticX=void 0,this._xAxis=C(),this._rowData=void 0,this.rowsCap=this.cap,this.title(t=>this.cappedKeyAccessor(t)+": "+this.cappedValueAccessor(t)),this.label(t=>this.cappedKeyAccessor(t)),this.anchor(t,e)}_calculateAxisScale(){if(!this._x||this._elasticX){const t=function(t,e){var n,i,r,s=t.length,a=-1;if(null==e){for(;++a<s;)if(null!=(n=t[a])&&n>=n)for(i=r=n;++a<s;)null!=(n=t[a])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++a<s;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=r=n;++a<s;)null!=(n=e(t[a],a,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}(this._rowData,t=>this.cappedValueAccessor(t));t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0),this._x=_s().domain(t).range([0,this.effectiveWidth()])}this._xAxis.scale(this._x)}_drawAxis(){let t=this._g.select("g.axis");this._calculateAxisScale(),t.empty()&&(t=this._g.append("g").attr("class","axis")),t.attr("transform","translate(0, "+this.effectiveHeight()+")"),jh(t,this.transitionDuration(),this.transitionDelay()).call(this._xAxis)}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate("+this.margins().left+","+this.margins().top+")"),this._drawChart(),this}x(t){return arguments.length?(this._x=t,this):this._x}_drawGridLines(){this._g.selectAll("g.tick").select("line.grid-line").remove(),this._g.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",()=>-this.effectiveHeight())}_drawChart(){this._rowData=this.data(),this._drawAxis(),this._drawGridLines();let t=this._g.selectAll("g."+this._rowCssClass).data(this._rowData);this._removeElements(t),t=this._createElements(t).merge(t),this._updateElements(t)}_createElements(t){const e=t.enter().append("g").attr("class",(t,e)=>this._rowCssClass+" _"+e);return e.append("rect").attr("width",0),this._createLabels(e),e}_removeElements(t){t.exit().remove()}_rootValue(){const t=this._x(0);return t===-1/0||t!=t?this._x(1):t}_updateElements(t){const e=this._rowData.length;let n;n=this._fixedBarHeight?this._fixedBarHeight:(this.effectiveHeight()-(e+1)*this._gap)/e,this._hasLabelOffsetY||(this._labelOffsetY=n/2);const i=t.attr("transform",(t,e)=>"translate(0,"+((e+1)*this._gap+e*n)+")").select("rect").attr("height",n).attr("fill",this.getColor).on("click",t=>this._onClick(t)).classed("deselected",t=>!!this.hasFilter()&&!this._isSelectedRow(t)).classed("selected",t=>!!this.hasFilter()&&this._isSelectedRow(t));jh(i,this.transitionDuration(),this.transitionDelay()).attr("width",t=>Math.abs(this._rootValue()-this._x(this.cappedValueAccessor(t)))).attr("transform",t=>this._translateX(t)),this._createTitles(t),this._updateLabels(t)}_createTitles(t){this.renderTitle()&&(t.select("title").remove(),t.append("title").text(this.title()))}_createLabels(t){this.renderLabel()&&t.append("text").on("click",t=>this._onClick(t)),this.renderTitleLabel()&&t.append("text").attr("class",this._titleRowCssClass).on("click",t=>this._onClick(t))}_updateLabels(t){if(this.renderLabel()){const e=t.select("text").attr("x",this._labelOffsetX).attr("y",this._labelOffsetY).attr("dy",this._dyOffset).on("click",t=>this._onClick(t)).attr("class",(t,e)=>this._rowCssClass+" _"+e).text(t=>this.label()(t));jh(e,this.transitionDuration(),this.transitionDelay()).attr("transform",t=>this._translateX(t))}if(this.renderTitleLabel()){const e=t.select("."+this._titleRowCssClass).attr("x",this.effectiveWidth()-this._titleLabelOffsetX).attr("y",this._labelOffsetY).attr("dy",this._dyOffset).attr("text-anchor","end").on("click",t=>this._onClick(t)).attr("class",(t,e)=>this._titleRowCssClass+" _"+e).text(t=>this.title()(t));jh(e,this.transitionDuration(),this.transitionDelay()).attr("transform",t=>this._translateX(t))}}renderTitleLabel(t){return arguments.length?(this._renderTitleLabel=t,this):this._renderTitleLabel}_onClick(t){this.onClick(t)}_translateX(t){const e=this._x(this.cappedValueAccessor(t)),n=this._rootValue();return"translate("+(e>n?n:e)+",0)"}_doRedraw(){return this._drawChart(),this}xAxis(t){return arguments.length?(this._xAxis=t,this):this._xAxis}fixedBarHeight(t){return arguments.length?(this._fixedBarHeight=t,this):this._fixedBarHeight}gap(t){return arguments.length?(this._gap=t,this):this._gap}elasticX(t){return arguments.length?(this._elasticX=t,this):this._elasticX}labelOffsetX(t){return arguments.length?(this._labelOffsetX=t,this):this._labelOffsetX}labelOffsetY(t){return arguments.length?(this._labelOffsetY=t,this._hasLabelOffsetY=!0,this):this._labelOffsetY}titleLabelOffsetX(t){return arguments.length?(this._titleLabelOffsetX=t,this):this._titleLabelOffsetX}_isSelectedRow(t){return this.hasFilter(this.cappedKeyAccessor(t))}}const El=5,Nl="dc-tooltip",Rl="dot",Pl="yRef",Ol="xRef",zl=1e-6,Fl=3;const Hl=t=>(class extends(ul(t)){constructor(){super(),this._maxBubbleRelativeSize=.3,this._minRadiusWithLabel=10,this._sortBubbleSize=!1,this._elasticRadius=!1,this.BUBBLE_NODE_CLASS="node",this.BUBBLE_CLASS="bubble",this.MIN_RADIUS=10,this.renderLabel(!0),this.data(t=>{const e=t.all();if(this._sortBubbleSize){const t=this.radiusValueAccessor();e.sort((e,n)=>(function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN})(t(e),t(n)))}return e}),this._r=_s().domain([0,100])}_rValueAccessor(t){return t.r}r(t){return arguments.length?(this._r=t,this):this._r}elasticRadius(t){return arguments.length?(this._elasticRadius=t,this):this._elasticRadius}calculateRadiusDomain(){this._elasticRadius&&this.r().domain([this.rMin(),this.rMax()])}radiusValueAccessor(t){return arguments.length?(this._rValueAccessor=t,this):this._rValueAccessor}rMin(){return l(this.data(),t=>this.radiusValueAccessor()(t))}rMax(){return h(this.data(),t=>this.radiusValueAccessor()(t))}bubbleR(t){const e=this.radiusValueAccessor()(t);let n=this.r()(e);return(isNaN(n)||e<=0)&&(n=0),n}_labelFunction(t){return this.label()(t)}_shouldLabel(t){return this.bubbleR(t)>this._minRadiusWithLabel}_labelOpacity(t){return this._shouldLabel(t)?1:0}_labelPointerEvent(t){return this._shouldLabel(t)?"all":"none"}_doRenderLabel(t){if(this.renderLabel()){let e=t.select("text");e.empty()&&(e=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t=>this.onClick(t))),e.attr("opacity",0).attr("pointer-events",t=>this._labelPointerEvent(t)).text(t=>this._labelFunction(t)),jh(e,this.transitionDuration(),this.transitionDelay()).attr("opacity",t=>this._labelOpacity(t))}}doUpdateLabels(t){if(this.renderLabel()){const e=t.select("text").attr("pointer-events",t=>this._labelPointerEvent(t)).text(t=>this._labelFunction(t));jh(e,this.transitionDuration(),this.transitionDelay()).attr("opacity",t=>this._labelOpacity(t))}}_titleFunction(t){return this.title()(t)}_doRenderTitles(t){if(this.renderTitle()){t.select("title").empty()&&t.append("title").text(t=>this._titleFunction(t))}}doUpdateTitles(t){this.renderTitle()&&t.select("title").text(t=>this._titleFunction(t))}sortBubbleSize(t){return arguments.length?(this._sortBubbleSize=t,this):this._sortBubbleSize}minRadius(t){return arguments.length?(this.MIN_RADIUS=t,this):this.MIN_RADIUS}minRadiusWithLabel(t){return arguments.length?(this._minRadiusWithLabel=t,this):this._minRadiusWithLabel}maxBubbleRelativeSize(t){return arguments.length?(this._maxBubbleRelativeSize=t,this):this._maxBubbleRelativeSize}fadeDeselectedArea(t){if(this.hasFilter()){const t=this;this.selectAll("g."+t.BUBBLE_NODE_CLASS).each((function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}))}else{const t=this;this.selectAll("g."+t.BUBBLE_NODE_CLASS).each((function(){t.resetHighlight(this)}))}}isSelectedNode(t){return this.hasFilter(t.key)}onClick(t){const e=t.key;nl.trigger(()=>{this.filter(e),this.redrawGroup()})}});class Bl extends(Hl(Cl)){constructor(t,e){super(),this.transitionDuration(750),this.transitionDelay(0),this.anchor(t,e)}_bubbleLocator(t){return"translate("+this._bubbleX(t)+","+this._bubbleY(t)+")"}plotData(){this.calculateRadiusDomain(),this.r().range([this.MIN_RADIUS,this.xAxisLength()*this.maxBubbleRelativeSize()]);const t=this.data();let e=this.chartBodyG().selectAll("g."+this.BUBBLE_NODE_CLASS).data(t,t=>t.key);this.sortBubbleSize()&&e.order(),this._removeNodes(e),e=this._renderNodes(e),this._updateNodes(e),this.fadeDeselectedArea(this.filter())}_renderNodes(t){const e=t.enter().append("g");return e.attr("class",this.BUBBLE_NODE_CLASS).attr("transform",t=>this._bubbleLocator(t)).append("circle").attr("class",(t,e)=>this.BUBBLE_CLASS+" _"+e).on("click",t=>this.onClick(t)).attr("fill",this.getColor).attr("r",0),t=e.merge(t),jh(t,this.transitionDuration(),this.transitionDelay()).select("circle."+this.BUBBLE_CLASS).attr("r",t=>this.bubbleR(t)).attr("opacity",t=>this.bubbleR(t)>0?1:0),this._doRenderLabel(e),this._doRenderTitles(e),t}_updateNodes(t){jh(t,this.transitionDuration(),this.transitionDelay()).attr("transform",t=>this._bubbleLocator(t)).select("circle."+this.BUBBLE_CLASS).attr("fill",this.getColor).attr("r",t=>this.bubbleR(t)).attr("opacity",t=>this.bubbleR(t)>0?1:0),this.doUpdateLabels(t),this.doUpdateTitles(t)}_removeNodes(t){t.exit().remove()}_bubbleX(t){let e=this.x()(this.keyAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}_bubbleY(t){let e=this.y()(this.valueAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}renderBrush(){}redrawBrush(t,e){this.fadeDeselectedArea(t)}}const Ul="dc-table-label",Yl="dc-table-row",Gl="dc-table-column",Il="dc-table-section dc-table-group",Vl="dc-table-head";const Xl=2;class Wl{constructor(){this._parent=void 0,this._x=0,this._y=0,this._itemHeight=12,this._gap=5,this._horizontal=!1,this._legendWidth=560,this._itemWidth=70,this._autoItemWidth=!1,this._legendText=Qh("name"),this._maxItems=void 0,this._g=void 0}parent(t){return arguments.length?(this._parent=t,this):this._parent}x(t){return arguments.length?(this._x=t,this):this._x}y(t){return arguments.length?(this._y=t,this):this._y}gap(t){return arguments.length?(this._gap=t,this):this._gap}itemHeight(t){return arguments.length?(this._itemHeight=t,this):this._itemHeight}horizontal(t){return arguments.length?(this._horizontal=t,this):this._horizontal}legendWidth(t){return arguments.length?(this._legendWidth=t,this):this._legendWidth}itemWidth(t){return arguments.length?(this._itemWidth=t,this):this._itemWidth}autoItemWidth(t){return arguments.length?(this._autoItemWidth=t,this):this._autoItemWidth}legendText(t){return arguments.length?(this._legendText=t,this):this._legendText}maxItems(t){return arguments.length?(this._maxItems=Jh.isNumber(t)?t:void 0,this):this._maxItems}_legendItemHeight(){return this._gap+this._itemHeight}render(){this._parent.svg().select("g.dc-legend").remove(),this._g=this._parent.svg().append("g").attr("class","dc-legend").attr("transform","translate("+this._x+","+this._y+")");let t=this._parent.legendables();void 0!==this._maxItems&&(t=t.slice(0,this._maxItems));const e=this._g.selectAll("g.dc-legend-item").data(t).enter().append("g").attr("class","dc-legend-item").on("mouseover",t=>{this._parent.legendHighlight(t)}).on("mouseout",t=>{this._parent.legendReset(t)}).on("click",t=>{t.chart.legendToggle(t)});this._g.selectAll("g.dc-legend-item").classed("fadeout",t=>t.chart.isLegendableHidden(t)),t.some(Qh("dashstyle"))?e.append("line").attr("x1",0).attr("y1",this._itemHeight/2).attr("x2",this._itemHeight).attr("y2",this._itemHeight/2).attr("stroke-width",2).attr("stroke-dasharray",Qh("dashstyle")).attr("stroke",Qh("color")):e.append("rect").attr("width",this._itemHeight).attr("height",this._itemHeight).attr("fill",t=>t?t.color:"blue");{const t=this;e.append("text").text(t._legendText).attr("x",t._itemHeight+Xl).attr("y",(function(){return t._itemHeight/2+(this.clientHeight?this.clientHeight:13)/2-2}))}let n=0,i=0;{const t=this;e.attr("transform",(function(e,r){if(t._horizontal){const e=!0===t._autoItemWidth?this.getBBox().width+t._gap:t._itemWidth;n+e>t._legendWidth&&n>0&&(++i,n=0);const r="translate("+n+","+i*t._legendItemHeight()+")";return n+=e,r}return"translate(0,"+r*t._legendItemHeight()+")"}))}}}var jl=new dl("#gain-loss-chart"),ql=new Dl("#fluctuation-chart"),Zl=new dl("#quarter-chart"),$l=new Ll("#day-of-week-chart"),Kl=new class extends kl{constructor(t,e){super(),this._renderArea=!1,this._dotRadius=El,this._dataPointRadius=null,this._dataPointFillOpacity=zl,this._dataPointStrokeOpacity=zl,this._curve=null,this._interpolate=null,this._tension=null,this._defined=void 0,this._dashStyle=void 0,this._xyTipsOn=!0,this.transitionDuration(500),this.transitionDelay(0),this._rangeBandPadding(1),this.label(t=>Jh.printSingleValue(t.y0+t.y),!1),this.anchor(t,e)}plotData(){const t=this.chartBodyG();let e=t.select("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));let n=e.selectAll("g.stack").data(this.data());const i=n.enter().append("g").attr("class",(t,e)=>"stack _"+e);n=i.merge(n),this._drawLine(i,n),this._drawArea(i,n),this._drawDots(t,n),this.renderLabel()&&this._drawLabels(n)}curve(t){return arguments.length?(this._curve=t,this):this._curve}interpolate(t){return Bh.warnOnce("dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),arguments.length?(this._interpolate=t,this):this._interpolate}tension(t){return Bh.warnOnce("dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),arguments.length?(this._tension=t,this):this._tension}defined(t){return arguments.length?(this._defined=t,this):this._defined}dashStyle(t){return arguments.length?(this._dashStyle=t,this):this._dashStyle}renderArea(t){return arguments.length?(this._renderArea=t,this):this._renderArea}_getColor(t,e){return this.getColor.call(t,t.values,e)}_getCurveFactory(){let t=null;if(this._curve)return this._curve;if("function"==typeof this._interpolate)t=this._interpolate;else{t={linear:zo,"linear-closed":oh,step:gh,"step-before":yh,"step-after":mh,basis:Wo,"basis-open":$o,"basis-closed":qo,bundle:Qo,cardinal:eh,"cardinal-open":sh,"cardinal-closed":ih,monotone:_h}[this._interpolate]}return t||(t=zo),null!==this._tension&&("function"!=typeof t.tension?Bh.warn("tension was specified but the curve/interpolate does not support it."):t=t.tension(this._tension)),t}_drawLine(t,e){const n=Bo().x(t=>this.x()(t.x)).y(t=>this.y()(t.y+t.y0)).curve(this._getCurveFactory());this._defined&&n.defined(this._defined);const i=t.append("path").attr("class","line").attr("stroke",(t,e)=>this._getColor(t,e));this._dashStyle&&i.attr("stroke-dasharray",this._dashStyle),jh(e.select("path.line"),this.transitionDuration(),this.transitionDelay()).attr("stroke",(t,e)=>this._getColor(t,e)).attr("d",t=>this._safeD(n(t.values)))}_drawArea(t,e){if(this._renderArea){const n=function(){var t=Fo,e=null,n=po(0),i=Ho,r=po(!0),s=null,a=zo,o=null;function h(h){var l,u,c,f,d,_=h.length,p=!1,g=new Array(_),y=new Array(_);for(null==s&&(o=a(d=Qi())),l=0;l<=_;++l){if(!(l<_&&r(f=h[l],l,h))===p)if(p=!p)u=l,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),c=l-1;c>=u;--c)o.point(g[c],y[c]);o.lineEnd(),o.areaEnd()}p&&(g[l]=+t(f,l,h),y[l]=+n(f,l,h),o.point(e?+e(f,l,h):g[l],i?+i(f,l,h):y[l]))}if(d)return o=null,d+""||null}function l(){return Bo().defined(r).curve(a).context(s)}return h.x=function(n){return arguments.length?(t="function"==typeof n?n:po(+n),e=null,h):t},h.x0=function(e){return arguments.length?(t="function"==typeof e?e:po(+e),h):t},h.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:po(+t),h):e},h.y=function(t){return arguments.length?(n="function"==typeof t?t:po(+t),i=null,h):n},h.y0=function(t){return arguments.length?(n="function"==typeof t?t:po(+t),h):n},h.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:po(+t),h):i},h.lineX0=h.lineY0=function(){return l().x(t).y(n)},h.lineY1=function(){return l().x(t).y(i)},h.lineX1=function(){return l().x(e).y(n)},h.defined=function(t){return arguments.length?(r="function"==typeof t?t:po(!!t),h):r},h.curve=function(t){return arguments.length?(a=t,null!=s&&(o=a(s)),h):a},h.context=function(t){return arguments.length?(null==t?s=o=null:o=a(s=t),h):s},h}().x(t=>this.x()(t.x)).y1(t=>this.y()(t.y+t.y0)).y0(t=>this.y()(t.y0)).curve(this._getCurveFactory());this._defined&&n.defined(this._defined),t.append("path").attr("class","area").attr("fill",(t,e)=>this._getColor(t,e)).attr("d",t=>this._safeD(n(t.values))),jh(e.select("path.area"),this.transitionDuration(),this.transitionDelay()).attr("fill",(t,e)=>this._getColor(t,e)).attr("d",t=>this._safeD(n(t.values)))}}_safeD(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}_drawDots(t,e){if("always"===this.xyTipsOn()||!this.brushOn()&&!this.parentBrushOn()&&this.xyTipsOn()){const n=Nl+"-list";let i=t.select("g."+n);i.empty()&&(i=t.append("g").attr("class",n)),e.each((t,e)=>{let n=t.values;this._defined&&(n=n.filter(this._defined));let r=i.select("g."+Nl+"._"+e);r.empty()&&(r=i.append("g").attr("class",Nl+" _"+e)),this._createRefLines(r);const s=r.selectAll("circle."+Rl).data(n,Qh("x")),a=this,o=s.enter().append("circle").attr("class",Rl).attr("cx",t=>Jh.safeNumber(this.x()(t.x))).attr("cy",t=>Jh.safeNumber(this.y()(t.y+t.y0))).attr("r",this._getDotRadius()).style("fill-opacity",this._dataPointFillOpacity).style("stroke-opacity",this._dataPointStrokeOpacity).attr("fill",this.getColor).attr("stroke",this.getColor).on("mousemove",(function(){const t=Yt(this);a._showDot(t),a._showRefLines(t,r)})).on("mouseout",(function(){const t=Yt(this);a._hideDot(t),a._hideRefLines(r)})).merge(s);o.call(e=>this._doRenderTitle(e,t)),jh(o,this.transitionDuration()).attr("cx",t=>Jh.safeNumber(this.x()(t.x))).attr("cy",t=>Jh.safeNumber(this.y()(t.y+t.y0))).attr("fill",this.getColor),s.exit().remove()})}}_drawLabels(t){const e=this;t.each((function(t,n){const i=Yt(this).selectAll("text.lineLabel").data(t.values,Qh("x")),r=i.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(i);jh(r,e.transitionDuration()).attr("x",t=>Jh.safeNumber(e.x()(t.x))).attr("y",t=>{const n=e.y()(t.y+t.y0)-Fl;return Jh.safeNumber(n)}).text(t=>e.label()(t)),jh(i.exit(),e.transitionDuration()).attr("height",0).remove()}))}_createRefLines(t){(t.select("path."+Pl).empty()?t.append("path").attr("class",Pl):t.select("path."+Pl)).style("display","none").attr("stroke-dasharray","5,5"),(t.select("path."+Ol).empty()?t.append("path").attr("class",Ol):t.select("path."+Ol)).style("display","none").attr("stroke-dasharray","5,5")}_showDot(t){return t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",this._dotRadius),t}_showRefLines(t,e){const n=t.attr("cx"),i=t.attr("cy"),r="M"+(this._yAxisX()-this.margins().left)+" "+i+"L"+n+" "+i,s="M"+n+" "+this.yAxisHeight()+"L"+n+" "+i;e.select("path."+Pl).style("display","").attr("d",r),e.select("path."+Ol).style("display","").attr("d",s)}_getDotRadius(){return this._dataPointRadius||this._dotRadius}_hideDot(t){t.style("fill-opacity",this._dataPointFillOpacity).style("stroke-opacity",this._dataPointStrokeOpacity).attr("r",this._getDotRadius())}_hideRefLines(t){t.select("path."+Pl).style("display","none"),t.select("path."+Ol).style("display","none")}_doRenderTitle(t,e){this.renderTitle()&&(t.select("title").remove(),t.append("title").text(Qh("data",this.title(e.name))))}xyTipsOn(t){return arguments.length?(this._xyTipsOn=t,this):this._xyTipsOn}dotRadius(t){return arguments.length?(this._dotRadius=t,this):this._dotRadius}renderDataPoints(t){return arguments.length?(t?(this._dataPointFillOpacity=t.fillOpacity||.8,this._dataPointStrokeOpacity=t.strokeOpacity||0,this._dataPointRadius=t.radius||2):(this._dataPointFillOpacity=zl,this._dataPointStrokeOpacity=zl,this._dataPointRadius=null),this):{fillOpacity:this._dataPointFillOpacity,strokeOpacity:this._dataPointStrokeOpacity,radius:this._dataPointRadius}}_colorFilter(t,e,n){return function(){const i=Yt(this),r=i.attr("stroke")===t&&i.attr("stroke-dasharray")===(e instanceof Array?e.join(","):null)||i.attr("fill")===t;return n?!r:r}}legendHighlight(t){this.isLegendableHidden(t)||this.g().selectAll("path.line, path.area").classed("highlight",this._colorFilter(t.color,t.dashstyle)).classed("fadeout",this._colorFilter(t.color,t.dashstyle,!0))}legendReset(){this.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)}legendables(){const t=super.legendables();return this._dashStyle?t.map(t=>(t.dashstyle=this._dashStyle,t)):t}}("#monthly-move-chart"),Ql=new Dl("#monthly-volume-chart"),Jl=new Bl("#yearly-bubble-chart"),tu=new class extends ll{constructor(t,e){super(),this._formatNumber=Yr(",d"),this._crossfilter=null,this._groupAll=null,this._html={some:"",all:""},this._mandatoryAttributes(["crossfilter","groupAll"]),this.anchor(t,e)}html(t){return arguments.length?(t.all&&(this._html.all=t.all),t.some&&(this._html.some=t.some),this):this._html}formatNumber(t){return arguments.length?(this._formatNumber=t,this):this._formatNumber}_doRender(){const t=this.crossfilter().size(),e=this.groupAll().value(),n=this._formatNumber(t),i=this._formatNumber(e);return t===e&&""!==this._html.all?this.root().html(this._html.all.replace("%total-count",n).replace("%filter-count",i)):""!==this._html.some?this.root().html(this._html.some.replace("%total-count",n).replace("%filter-count",i)):(this.selectAll(".total-count").text(n),this.selectAll(".filter-count").text(i)),this}_doRedraw(){return this._doRender()}crossfilter(t){return arguments.length?(this._crossfilter=t,this):this._crossfilter}dimension(t){return Bh.warnOnce("consider using dataCount.crossfilter instead of dataCount.dimension for clarity"),arguments.length?this.crossfilter(t):this.crossfilter()}groupAll(t){return arguments.length?(this._groupAll=t,this):this._groupAll}group(t){return Bh.warnOnce("consider using dataCount.groupAll instead of dataCount.group for clarity"),arguments.length?this.groupAll(t):this.groupAll()}}(".dc-data-count"),eu=new class extends ll{constructor(e,n){super(),this._size=25,this._columns=[],this._sortBy=t=>t,this._order=t,this._beginSlice=0,this._endSlice=void 0,this._showSections=!0,this._section=()=>"",this._mandatoryAttributes(["dimension"]),this.anchor(e,n)}_doRender(){return this.selectAll("tbody").remove(),this._renderRows(this._renderSections()),this}_doColumnValueFormat(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)}_doColumnHeaderFormat(t){return"function"==typeof t?this._doColumnHeaderFnToString(t):"string"==typeof t?this._doColumnHeaderCapitalize(t):String(t.label)}_doColumnHeaderCapitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}_doColumnHeaderFnToString(t){let e=String(t);const n=e.indexOf("return ");if(n>=0){const t=e.lastIndexOf(";");if(t>=0){(e=e.substring(n+7,t)).indexOf("numberFormat")>=0&&(e=e.replace("numberFormat",""))}}return e}_renderSections(){let t=!0;if(this._columns.forEach(e=>{t&="function"==typeof e}),!t){let t=this.selectAll("thead").data([0]);t.exit().remove();let e=(t=t.enter().append("thead").merge(t)).selectAll("tr").data([0]);e.exit().remove();const n=(e=e.enter().append("tr").merge(e)).selectAll("th").data(this._columns);n.exit().remove(),n.enter().append("th").merge(n).attr("class",Vl).html(t=>this._doColumnHeaderFormat(t))}const e=this.root().selectAll("tbody").data(this._nestEntries(),t=>this.keyAccessor()(t)),n=e.enter().append("tbody");return!0===this._showSections&&n.append("tr").attr("class",Il).append("td").attr("class",Ul).attr("colspan",this._columns.length).html(t=>this.keyAccessor()(t)),e.exit().remove(),n}_nestEntries(){let e;return e=this._order===t?this.dimension().bottom(this._size):this.dimension().top(this._size),er().key(this.section()).sortKeys(this._order).entries(e.sort((t,e)=>this._order(this._sortBy(t),this._sortBy(e))).slice(this._beginSlice,this._endSlice))}_renderRows(t){const e=t.order().selectAll("tr."+Yl).data(t=>t.values),n=e.enter().append("tr").attr("class",Yl);return this._columns.forEach((t,e)=>{n.append("td").attr("class",Gl+" _"+e).html(e=>this._doColumnValueFormat(t,e))}),e.exit().remove(),e}_doRedraw(){return this._doRender()}section(t){return arguments.length?(this._section=t,this):this._section}group(t){return Bh.warnOnce("consider using dataTable.section instead of dataTable.group for clarity"),arguments.length?this.section(t):this.section()}size(t){return arguments.length?(this._size=t,this):this._size}beginSlice(t){return arguments.length?(this._beginSlice=t,this):this._beginSlice}endSlice(t){return arguments.length?(this._endSlice=t,this):this._endSlice}columns(t){return arguments.length?(this._columns=t,this):this._columns}sortBy(t){return arguments.length?(this._sortBy=t,this):this._sortBy}order(t){return arguments.length?(this._order=t,this):this._order}showSections(t){return arguments.length?(this._showSections=t,this):this._showSections}showGroups(t){return Bh.warnOnce("consider using dataTable.showSections instead of dataTable.showGroups for clarity"),arguments.length?this.showSections(t):this.showSections()}}(".dc-data-table");wr("../data/ndx.csv").then((function(e){var n=Gs("%m/%d/%Y"),i=Is("%m/%d/%Y"),r=Yr(".2f");e.forEach((function(t){t.dd=i(t.date),t.month=Ds(t.dd),t.close=+t.close,t.open=+t.open}));var s=Fh(e),a=s.groupAll(),o=s.dimension((function(t){return Es(t.dd).getFullYear()})),h=o.group().reduce((function(t,e){return++t.count,t.absGain+=e.close-e.open,t.fluctuation+=Math.abs(e.close-e.open),t.sumIndex+=(e.open+e.close)/2,t.avgIndex=t.sumIndex/t.count,t.percentageGain=t.avgIndex?t.absGain/t.avgIndex*100:0,t.fluctuationPercentage=t.avgIndex?t.fluctuation/t.avgIndex*100:0,t}),(function(t,e){return--t.count,t.absGain-=e.close-e.open,t.fluctuation-=Math.abs(e.close-e.open),t.sumIndex-=(e.open+e.close)/2,t.avgIndex=t.count?t.sumIndex/t.count:0,t.percentageGain=t.avgIndex?t.absGain/t.avgIndex*100:0,t.fluctuationPercentage=t.avgIndex?t.fluctuation/t.avgIndex*100:0,t}),(function(){return{count:0,absGain:0,fluctuation:0,fluctuationPercentage:0,sumIndex:0,avgIndex:0,percentageGain:0}})),l=s.dimension((function(t){return t.dd})),u=s.dimension((function(t){return t.month})),c=u.group().reduceSum((function(t){return Math.abs(t.close-t.open)})),f=u.group().reduceSum((function(t){return t.volume/5e5})),d=u.group().reduce((function(t,e){return++t.days,t.total+=(e.open+e.close)/2,t.avg=Math.round(t.total/t.days),t}),(function(t,e){return--t.days,t.total-=(e.open+e.close)/2,t.avg=t.days?Math.round(t.total/t.days):0,t}),(function(){return{days:0,total:0,avg:0}})),_=s.dimension((function(t){return t.open>t.close?"Loss":"Gain"})),p=_.group(),g=s.dimension((function(t){return Math.round((t.close-t.open)/t.open*100)})),y=g.group(),m=s.dimension((function(t){var e=t.dd.getMonth();return e<=2?"Q1":e>2&&e<=5?"Q2":e>5&&e<=8?"Q3":"Q4"})),v=m.group().reduceSum((function(t){return t.volume})),x=s.dimension((function(t){var e=t.dd.getDay();return e+"."+["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e]})),b=x.group();Jl.width(990).height(250).transitionDuration(1500).margins({top:10,right:50,bottom:30,left:40}).dimension(o).group(h).colors(_o[9]).colorDomain([-500,500]).colorAccessor((function(t){return t.value.absGain})).keyAccessor((function(t){return t.value.absGain})).valueAccessor((function(t){return t.value.percentageGain})).radiusValueAccessor((function(t){return t.value.fluctuationPercentage})).maxBubbleRelativeSize(.3).x(_s().domain([-2500,2500])).y(_s().domain([-100,100])).r(_s().domain([0,4e3])).elasticY(!0).elasticX(!0).yAxisPadding(100).xAxisPadding(500).renderHorizontalGridLines(!0).renderVerticalGridLines(!0).xAxisLabel("Index Gain").yAxisLabel("Index Gain %").renderLabel(!0).label((function(t){return t.key})).renderTitle(!0).title((function(t){return[t.key,"Index Gain: "+r(t.value.absGain),"Index Gain in Percentage: "+r(t.value.percentageGain)+"%","Fluctuation / Index Ratio: "+r(t.value.fluctuationPercentage)+"%"].join("\n")})).yAxis().tickFormat((function(t){return t+"%"})),jl.width(180).height(180).radius(80).dimension(_).group(p).label((function(t){if(jl.hasFilter()&&!jl.hasFilter(t.key))return t.key+"(0%)";var e=t.key;return a.value()&&(e+="("+Math.floor(t.value/a.value()*100)+"%)"),e})),Zl.width(180).height(180).radius(80).innerRadius(30).dimension(m).group(v),$l.width(180).height(180).margins({top:20,left:10,right:10,bottom:20}).group(b).dimension(x).ordinalColors(["#3182bd","#6baed6","#9ecae1","#c6dbef","#dadaeb"]).label((function(t){return t.key.split(".")[1]})).title((function(t){return t.value})).elasticX(!0).xAxis().ticks(4),ql.width(420).height(180).margins({top:10,right:50,bottom:30,left:40}).dimension(g).group(y).elasticY(!0).centerBar(!0).gap(1).round(Math.floor).alwaysUseRounding(!0).x(_s().domain([-25,25])).renderHorizontalGridLines(!0).filterPrinter((function(t){var e=t[0],n="";return n+=r(e[0])+"% -> "+r(e[1])+"%"})),ql.xAxis().tickFormat((function(t){return t+"%"})),ql.yAxis().ticks(5),Kl.renderArea(!0).width(990).height(200).transitionDuration(1e3).margins({top:30,right:50,bottom:25,left:40}).dimension(u).mouseZoomable(!0).rangeChart(Ql).x(uo().domain([new Date(1985,0,1),new Date(2012,11,31)])).round(Ds.round).xUnits(Ls).elasticY(!0).renderHorizontalGridLines(!0).legend((new Wl).x(800).y(10).itemHeight(13).gap(5)).brushOn(!1).group(d,"Monthly Index Average").valueAccessor((function(t){return t.value.avg})).stack(c,"Monthly Index Move",(function(t){return t.value})).title((function(t){var e=t.value.avg?t.value.avg:t.value;return isNaN(e)&&(e=0),n(t.key)+"\n"+r(e)})),Ql.width(990).height(40).margins({top:0,right:50,bottom:20,left:40}).dimension(u).group(f).centerBar(!0).gap(1).x(uo().domain([new Date(1985,0,1),new Date(2012,11,31)])).round(Ds.round).alwaysUseRounding(!0).xUnits(Ls),tu.crossfilter(s).groupAll(a).html({some:"<strong>%filter-count</strong> selected out of <strong>%total-count</strong> records | <a href='javascript:dc.filterAll(); dc.renderAll();'>Reset All</a>",all:"All records selected. Please click on the graph to apply filters."}),eu.dimension(l).section((function(t){var e=Yr("02d");return t.dd.getFullYear()+"/"+e(t.dd.getMonth()+1)})).size(10).columns(["date","open","close",{label:"Change",format:function(t){return r(t.close-t.open)}},"volume"]).sortBy((function(t){return t.dd})).order(t).on("renderlet",(function(t){t.selectAll(".dc-table-group").classed("info",!0)})),Xh()})),function(t,e){return fetch(t,e).then(Ar)}("https://api.github.com/repos/dc-js/dc.js/releases/latest").then((function(t){(function(t){return"string"==typeof t?new Bt([document.querySelectorAll(t)],[document.documentElement]):new Bt([null==t?[]:t],Ht)})("#latest").text(t.tag_name)}))}();
